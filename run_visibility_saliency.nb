(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 10.1' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[    197046,       4669]
NotebookOptionsPosition[    195984,       4635]
NotebookOutlinePosition[    196327,       4650]
CellTagsIndexPosition[    196284,       4647]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"s", "=", 
     RowBox[{
      RowBox[{"InputString", "[", 
       RowBox[{"\"\<Enter xml file name\>\"", ",", "\"\<tooth.xml\>\""}], 
       "]"}], "//", 
      RowBox[{
       RowBox[{"StringReplace", "[", 
        RowBox[{"#", ",", 
         RowBox[{"\"\< \>\"", "\[Rule]", "\"\<\>\""}]}], "]"}], "&"}]}]}], 
    ";"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"xml", "=", 
     RowBox[{"Import", "[", 
      RowBox[{
       RowBox[{"NotebookDirectory", "[", "]"}], "<>", "\"\<~images\\\\\>\"", 
       "<>", "\"\<tooth_naive.xml\>\""}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "tfifile", ",", "volumefile", ",", "legends", ",", "face", ",", 
       "imagefilenames", ",", "txtfilenames", ",", 
       RowBox[{"{", 
        RowBox[{"featurefilename", ",", "visibilityfilename"}], "}"}], ",", 
       "resultxml", ",", "imagefile", ",", "rawfile", ",", "dataname"}], 
      "}"}], "=", "xml"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"Column", "[", 
    RowBox[{"xml", ",", 
     RowBox[{"Background", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Lighter", "@", "LightYellow"}], ",", 
         RowBox[{"Lighter", "@", "LightBlue"}]}], "}"}], "}"}]}], ",", 
     RowBox[{"Frame", "\[Rule]", "True"}], ",", 
     RowBox[{"FrameStyle", "\[Rule]", 
      RowBox[{"Directive", "[", 
       RowBox[{"LightGray", ",", "Thin", ",", "Dashed"}], "]"}]}]}], 
    "]"}]}]}]], "Input",
 CellChangeTimes->{{3.650016010847435*^9, 3.6500160344620285`*^9}, 
   3.6500160970401473`*^9, 3.6500165656694775`*^9, 3.650016713948494*^9, 
   3.650017085260745*^9, {3.6500171411902285`*^9, 3.6500171817495975`*^9}, {
   3.650017233984085*^9, 3.6500172898926163`*^9}, {3.6500174423929048`*^9, 
   3.6500174871293154`*^9}, {3.6500175403349094`*^9, 
   3.6500175986715207`*^9}, {3.6500176324156456`*^9, 3.650017632994951*^9}, {
   3.6500177269517217`*^9, 3.65001777747255*^9}, 3.6500222412081485`*^9, 
   3.6500225840162363`*^9, {3.650025621303483*^9, 3.6500256222287245`*^9}, 
   3.6500395269270196`*^9, 3.65003979959371*^9, {3.650045015344633*^9, 
   3.6500450580942793`*^9}, 3.6500451183246503`*^9, 3.6500451733582335`*^9, 
   3.650045343145255*^9, {3.65009686307224*^9, 3.6500969160928507`*^9}, {
   3.6500969618530903`*^9, 3.6500969752331004`*^9}, {3.6500971869883966`*^9, 
   3.6500972288452*^9}, 3.6501073780119085`*^9, 3.650107723220256*^9, {
   3.6501079238588104`*^9, 3.6501079321720405`*^9}, 3.650128318028931*^9, {
   3.650128936247884*^9, 3.6501289619536343`*^9}, {3.65013095222859*^9, 
   3.650130952964272*^9}, {3.6501312946084805`*^9, 3.650131298228372*^9}, {
   3.6501317605222197`*^9, 3.6501317725783114`*^9}, {3.650135334384781*^9, 
   3.6501353376933403`*^9}, {3.650137703884256*^9, 3.6501377064503856`*^9}, 
   3.6501398070716214`*^9, 3.6502659151440983`*^9, 3.650266777120908*^9, 
   3.6503712217213182`*^9, {3.6503715511097264`*^9, 3.6503715528021455`*^9}, {
   3.6503716788627462`*^9, 3.6503716842142973`*^9}, {3.6503720868285866`*^9, 
   3.6503720978840017`*^9}, {3.6512705809146957`*^9, 3.651270583350629*^9}, 
   3.651273752937693*^9, {3.6520098937075024`*^9, 3.652009897594437*^9}, 
   3.652390402197175*^9, {3.6523939877015543`*^9, 3.6523939878690786`*^9}, {
   3.6523941334575434`*^9, 3.6523941342598553`*^9}, 3.652441919495344*^9, 
   3.6524434241756444`*^9, 3.652465585937043*^9, 3.6524667391036024`*^9, 
   3.652467745885472*^9, 3.6524677846309423`*^9, 3.6524683081870394`*^9, 
   3.652468863433117*^9, 3.6532345717570367`*^9, 3.6532367870047913`*^9}],

Cell[BoxData[
 TagBox[GridBox[{
    {"\<\"D:\\\\document\\\\work\\\\time-varying-visualization\\\\feature_\
transfer_function\\\\tooth_naive.tfi\"\>"},
    {"\<\"D:\\\\_volume_data\\\\Mathematica\\\\tooth.tif\"\>"},
    {
     RowBox[{"{", 
      RowBox[{"\<\"Feature 1\"\>", ",", "\<\"Feature 2\"\>", 
       ",", "\<\"Feature 3\"\>", ",", "\<\"Feature 4\"\>"}], "}"}]},
    {"\<\"front\"\>"},
    {
     RowBox[{"{", 
      RowBox[{"\<\"D:\\\\document\\\\work\\\\time-varying-visualization\\\\~\
images\\\\tooth_naive_saliency_chart.png\"\>", 
       ",", "\<\"D:\\\\document\\\\work\\\\time-varying-visualization\\\\~\
images\\\\tooth_naive_visibility_chart.png\"\>", 
       ",", "\<\"D:\\\\document\\\\work\\\\time-varying-visualization\\\\~\
images\\\\tooth_naive_visibility_saliency_brightness_chart.png\"\>", 
       ",", "\<\"D:\\\\document\\\\work\\\\time-varying-visualization\\\\~\
images\\\\tooth_naive_visibility_saliency_saturation_chart.png\"\>", 
       ",", "\<\"D:\\\\document\\\\work\\\\time-varying-visualization\\\\~\
images\\\\tooth_naive_visibility_saliency_weighted_chart.png\"\>"}], "}"}]},
    {
     RowBox[{"{", 
      RowBox[{"\<\"D:\\\\document\\\\work\\\\time-varying-visualization\\\\~\
images\\\\tooth_naive_saliency_chart.txt\"\>", 
       ",", "\<\"D:\\\\document\\\\work\\\\time-varying-visualization\\\\~\
images\\\\tooth_naive_visibility_chart.txt\"\>", 
       ",", "\<\"D:\\\\document\\\\work\\\\time-varying-visualization\\\\~\
images\\\\tooth_naive_visibility_saliency_brightness_chart.txt\"\>", 
       ",", "\<\"D:\\\\document\\\\work\\\\time-varying-visualization\\\\~\
images\\\\tooth_naive_visibility_saliency_saturation_chart.txt\"\>", 
       ",", "\<\"D:\\\\document\\\\work\\\\time-varying-visualization\\\\~\
images\\\\tooth_naive_visibility_saliency_weighted_chart.txt\"\>"}], "}"}]},
    {
     RowBox[{"{", 
      RowBox[{"\<\"D:\\\\document\\\\work\\\\time-varying-visualization\\\\~\
images\\\\tooth_naive_visibility_saliency_feature.png\"\>", 
       ",", "\<\"D:\\\\document\\\\work\\\\time-varying-visualization\\\\~\
images\\\\tooth_naive_visibility.raw\"\>"}], "}"}]},
    {"\<\"D:\\\\document\\\\work\\\\time-varying-visualization\\\\~images\\\\\
saliency.xml\"\>"},
    {"\<\"D:\\\\document\\\\work\\\\time-varying-visualization\\\\~images\\\\\
tooth_naive.png\"\>"},
    {"\<\"D:\\\\document\\\\work\\\\time-varying-visualization\\\\~images\\\\\
tooth_naive.raw\"\>"},
    {"\<\"tooth_naive\"\>"}
   },
   DefaultBaseStyle->"Column",
   FrameStyle->Directive[
     GrayLevel[0.85], 
     Thickness[Tiny], 
     Dashing[{Small, Small}]],
   GridBoxAlignment->{"Columns" -> {{Left}}},
   GridBoxBackground->{"Columns" -> {{Automatic}}, "Rows" -> {{
        RGBColor[1, 1, 0.9], 
        RGBColor[0.9133333333333333, 0.96, 1]}}},
   GridBoxFrame->{"ColumnsIndexed" -> {{{1, -1}, {1, -1}} -> True}},
   GridBoxItemSize->{"Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}],
  "Column"]], "Output",
 CellChangeTimes->{{3.65001772953062*^9, 3.650017805957735*^9}, 
   3.65001828527962*^9, 3.6500183636578307`*^9, {3.6500184928593073`*^9, 
   3.650018507048661*^9}, 3.650018610490054*^9, 3.650018880105562*^9, 
   3.6500194768178015`*^9, 3.6500197583782372`*^9, 3.6500217022925243`*^9, 
   3.650022242427657*^9, 3.6500226796650906`*^9, 3.650025624694059*^9, 
   3.6500395336584773`*^9, 3.6500398032508087`*^9, 3.6500399023542476`*^9, 
   3.650044386089313*^9, {3.6500450201204877`*^9, 3.6500450599145517`*^9}, 
   3.650045120566739*^9, 3.6500451787992287`*^9, 3.650049834702578*^9, 
   3.6500969819204793`*^9, 3.650097320722912*^9, {3.650107352454342*^9, 
   3.6501073803226953`*^9}, 3.6501075792161665`*^9, 3.6501076179690294`*^9, 
   3.6501077363250127`*^9, {3.650107807255539*^9, 3.6501078336648703`*^9}, 
   3.6501079507660017`*^9, {3.650130943092552*^9, 3.6501309647630196`*^9}, 
   3.6501310962816534`*^9, 3.6501313014052935`*^9, 3.6501316680670795`*^9, 
   3.650135341178546*^9, {3.6501377087197475`*^9, 3.6501377357317057`*^9}, 
   3.6501402045547667`*^9, 3.650266780252553*^9, 3.6502720113896465`*^9, 
   3.6502763619166574`*^9, 3.65037122522395*^9, 3.65037155542929*^9, {
   3.6503716895003037`*^9, 3.650371715901218*^9}, 3.650371892493105*^9, {
   3.650372076671605*^9, 3.6503721003351855`*^9}, 3.6512706332443805`*^9, 
   3.6512737738559785`*^9, 3.6520099032531695`*^9, 3.6520099972070627`*^9, 
   3.652386284811323*^9, 3.6523863718317327`*^9, 3.65239040459182*^9, 
   3.65239408825391*^9, 3.6523941416480417`*^9, 3.6524420610783443`*^9, 
   3.6524434265770383`*^9, 3.6524436150283084`*^9, 3.652443795139987*^9, 
   3.6524656128027267`*^9, 3.6524667415139694`*^9, 3.6524671509400043`*^9, 
   3.652467246137444*^9, 3.6524677483000813`*^9, 3.652467786745713*^9, 
   3.6524683106514072`*^9, 3.6524688703328767`*^9, 3.652469127081557*^9, {
   3.6524692822951756`*^9, 3.652469306532543*^9}, 3.653234701585005*^9, 
   3.6532362290437717`*^9, 3.6532367972310233`*^9, 3.6534142510851955`*^9, 
   3.6534144755638905`*^9, 3.6534242211039066`*^9, 3.6534242911305704`*^9, 
   3.653424438347682*^9, 3.6534245879749923`*^9, 3.653425205984765*^9, 
   3.653426226236656*^9}]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"tf", "=", 
   RowBox[{"Import", "[", 
    RowBox[{"tfifile", ",", "\"\<XML\>\""}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"bincount", "=", "256"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"intensity", "=", 
   RowBox[{"ToExpression", "@", 
    RowBox[{"Cases", "[", 
     RowBox[{"tf", ",", 
      RowBox[{
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<intensity\>\"", ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"\"\<value\>\"", "\[Rule]", "atrib_"}], ",", "___"}], 
          "}"}], ",", "___"}], "]"}], "\[RuleDelayed]", "atrib"}], ",", 
      "\[Infinity]"}], "]"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"r", "=", 
   RowBox[{"ToExpression", "@", 
    RowBox[{"Cases", "[", 
     RowBox[{"tf", ",", 
      RowBox[{
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<colorL\>\"", ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"\"\<r\>\"", "\[Rule]", "atrib_"}], ",", "___"}], "}"}], 
         ",", "___"}], "]"}], "\[RuleDelayed]", "atrib"}], ",", 
      "\[Infinity]"}], "]"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"g", "=", 
   RowBox[{"ToExpression", "@", 
    RowBox[{"Cases", "[", 
     RowBox[{"tf", ",", 
      RowBox[{
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<colorL\>\"", ",", 
         RowBox[{"{", 
          RowBox[{"___", ",", 
           RowBox[{"\"\<g\>\"", "\[Rule]", "atrib_"}], ",", "___"}], "}"}], 
         ",", "___"}], "]"}], "\[RuleDelayed]", "atrib"}], ",", 
      "\[Infinity]"}], "]"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"b", "=", 
   RowBox[{"ToExpression", "@", 
    RowBox[{"Cases", "[", 
     RowBox[{"tf", ",", 
      RowBox[{
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<colorL\>\"", ",", 
         RowBox[{"{", 
          RowBox[{"___", ",", 
           RowBox[{"\"\<b\>\"", "\[Rule]", "atrib_"}], ",", "___"}], "}"}], 
         ",", "___"}], "]"}], "\[RuleDelayed]", "atrib"}], ",", 
      "\[Infinity]"}], "]"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"a", "=", 
   RowBox[{"ToExpression", "@", 
    RowBox[{"Cases", "[", 
     RowBox[{"tf", ",", 
      RowBox[{
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<colorL\>\"", ",", 
         RowBox[{"{", 
          RowBox[{"___", ",", 
           RowBox[{"\"\<a\>\"", "\[Rule]", "atrib_"}]}], "}"}], ",", "___"}], 
        "]"}], "\[RuleDelayed]", "atrib"}], ",", "\[Infinity]"}], "]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"rgbcolors", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       RowBox[{"#", "/", "255."}], "&"}], ")"}], "/@", 
     RowBox[{"Transpose", "[", 
      RowBox[{"{", 
       RowBox[{"r", ",", "g", ",", "b"}], "}"}], "]"}]}], "//", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{"RGBColor", "/@", "#"}], "&"}], ")"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"rgbfunction", "=", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"Blend", "[", 
      RowBox[{
       RowBox[{"Transpose", "[", 
        RowBox[{"{", 
         RowBox[{"intensity", ",", "rgbcolors"}], "}"}], "]"}], ",", " ", 
       "#1"}], "]"}], " ", "&"}], " ", ")"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"rgba", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       RowBox[{"#", "/", "255."}], "&"}], ")"}], "/@", 
     RowBox[{"Transpose", "[", 
      RowBox[{"{", 
       RowBox[{"r", ",", "g", ",", "b", ",", "a"}], "}"}], "]"}]}], "//", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{"RGBColor", "/@", "#"}], "&"}], ")"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"rgbafunction", "=", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"Blend", "[", 
      RowBox[{
       RowBox[{"Transpose", "[", 
        RowBox[{"{", 
         RowBox[{"intensity", ",", "rgba"}], "}"}], "]"}], ",", " ", "#1"}], 
      "]"}], " ", "&"}], " ", ")"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"alpha", "=", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      RowBox[{"#", "/", "255."}], "&"}], ")"}], "/@", "a"}]}], 
  ";"}]}], "Input",
 CellChangeTimes->{{3.6424355647667027`*^9, 3.642435565266699*^9}, 
   3.642436124261115*^9, {3.6424362074807196`*^9, 3.64243620790256*^9}, {
   3.642757483410643*^9, 3.642757488011518*^9}, 3.6427575232136173`*^9, 
   3.6427646278266616`*^9, 3.6439284927642207`*^9, 3.6500160465263705`*^9}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"d", " ", "=", " ", 
   RowBox[{"Import", "[", 
    RowBox[{"volumefile", ",", "\"\<Image3D\>\""}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"colorized", "=", 
   RowBox[{"Image3D", "[", 
    RowBox[{"d", ",", 
     RowBox[{"ColorFunction", "\[Rule]", "rgbafunction"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{"lightness", ",", "chroma", ",", "hue", ",", "opacity"}], "}"}], 
    "=", 
    RowBox[{
     RowBox[{
      RowBox[{"ImageApply", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"List", "@@", 
          RowBox[{"rgbafunction", "[", "#", "]"}]}], "&"}], ",", "d"}], "]"}],
       "//", 
      RowBox[{
       RowBox[{"Image3D", "[", 
        RowBox[{"#", ",", 
         RowBox[{"ColorSpace", "\[Rule]", "\"\<RGB\>\""}]}], "]"}], "&"}]}], "//", 
     RowBox[{
      RowBox[{"ColorSeparate", "[", 
       RowBox[{"ColorConvert", "[", 
        RowBox[{"#", ",", "\"\<LCH\>\""}], "]"}], "]"}], "&"}]}]}], ";"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"lo", "=", 
     RowBox[{"ImageMultiply", "[", 
      RowBox[{"lightness", ",", "opacity"}], "]"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"co", "=", 
     RowBox[{"ImageMultiply", "[", 
      RowBox[{"chroma", ",", "opacity"}], "]"}]}], ";"}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"g1", "=", 
     RowBox[{
      RowBox[{
       RowBox[{"ImageDifference", "[", 
        RowBox[{
         RowBox[{"GaussianFilter", "[", 
          RowBox[{"lightness", ",", 
           RowBox[{"{", 
            RowBox[{"2", ",", 
             RowBox[{
              RowBox[{
               RowBox[{"Sqrt", "[", "2", "]"}], "/", "8."}], "*", "2"}]}], 
            "}"}]}], "]"}], ",", 
         RowBox[{"GaussianFilter", "[", 
          RowBox[{"lightness", ",", 
           RowBox[{"{", 
            RowBox[{"4", ",", 
             RowBox[{
              RowBox[{
               RowBox[{"Sqrt", "[", "2", "]"}], "/", "8."}], "*", "4"}]}], 
            "}"}]}], "]"}]}], "]"}], "\[IndentingNewLine]", "g2"}], "=", 
      RowBox[{
       RowBox[{
        RowBox[{"ImageDifference", "[", 
         RowBox[{
          RowBox[{"GaussianFilter", "[", 
           RowBox[{"chroma", ",", 
            RowBox[{"{", 
             RowBox[{"2", ",", 
              RowBox[{
               RowBox[{
                RowBox[{"Sqrt", "[", "2", "]"}], "/", "8."}], "*", "2"}]}], 
             "}"}]}], "]"}], ",", 
          RowBox[{"GaussianFilter", "[", 
           RowBox[{"chroma", ",", 
            RowBox[{"{", 
             RowBox[{"4", ",", 
              RowBox[{
               RowBox[{
                RowBox[{"Sqrt", "[", "2", "]"}], "/", "8."}], "*", "4"}]}], 
             "}"}]}], "]"}]}], "]"}], "\[IndentingNewLine]", "g3"}], "=", 
       RowBox[{"ImageDifference", "[", 
        RowBox[{
         RowBox[{"GaussianFilter", "[", 
          RowBox[{"hue", ",", 
           RowBox[{"{", 
            RowBox[{"2", ",", 
             RowBox[{
              RowBox[{
               RowBox[{"Sqrt", "[", "2", "]"}], "/", "8."}], "*", "2"}]}], 
            "}"}]}], "]"}], ",", 
         RowBox[{"GaussianFilter", "[", 
          RowBox[{"hue", ",", 
           RowBox[{"{", 
            RowBox[{"4", ",", 
             RowBox[{
              RowBox[{
               RowBox[{"Sqrt", "[", "2", "]"}], "/", "8."}], "*", "4"}]}], 
            "}"}]}], "]"}]}], "]"}]}]}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"g4", "=", 
     RowBox[{"ImageDifference", "[", 
      RowBox[{
       RowBox[{"GaussianFilter", "[", 
        RowBox[{"opacity", ",", 
         RowBox[{"{", 
          RowBox[{"2", ",", 
           RowBox[{
            RowBox[{
             RowBox[{"Sqrt", "[", "2", "]"}], "/", "8."}], "*", "2"}]}], 
          "}"}]}], "]"}], ",", 
       RowBox[{"GaussianFilter", "[", 
        RowBox[{"opacity", ",", 
         RowBox[{"{", 
          RowBox[{"4", ",", 
           RowBox[{
            RowBox[{
             RowBox[{"Sqrt", "[", "2", "]"}], "/", "8."}], "*", "4"}]}], 
          "}"}]}], "]"}]}], "]"}]}], ";"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{"g1", ",", "g2"}], "}"}], "=", 
    RowBox[{"ParallelMap", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"ImageDifference", "[", 
        RowBox[{
         RowBox[{"GaussianFilter", "[", 
          RowBox[{"#", ",", 
           RowBox[{"{", 
            RowBox[{"2", ",", 
             RowBox[{
              RowBox[{
               RowBox[{"Sqrt", "[", "2", "]"}], "/", "8."}], "*", "2"}]}], 
            "}"}]}], "]"}], ",", 
         RowBox[{"GaussianFilter", "[", 
          RowBox[{"#", ",", 
           RowBox[{"{", 
            RowBox[{"4", ",", 
             RowBox[{
              RowBox[{
               RowBox[{"Sqrt", "[", "2", "]"}], "/", "8."}], "*", "4"}]}], 
            "}"}]}], "]"}]}], "]"}], "&"}], ",", 
      RowBox[{"{", 
       RowBox[{"lightness", ",", "chroma"}], "}"}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pos", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"intensity", "[", 
      RowBox[{"[", "#", "]"}], "]"}], "&"}], "/@", 
    RowBox[{"Flatten", "@", 
     RowBox[{"Position", "[", 
      RowBox[{"alpha", ",", 
       RowBox[{"_", "?", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"#", "==", "0"}], "&"}], ")"}]}]}], "]"}]}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"index", "=", 
   RowBox[{"Flatten", "@", 
    RowBox[{"Position", "[", 
     RowBox[{"alpha", ",", 
      RowBox[{"_", "?", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{"#", ">", "0"}], "&"}], ")"}]}]}], "]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"features", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"ImageApply", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"#", "\[GreaterEqual]", 
            RowBox[{"pos", "[", 
             RowBox[{"[", "i", "]"}], "]"}]}], " ", "&&", " ", 
           RowBox[{"#", "\[LessEqual]", 
            RowBox[{"pos", "[", 
             RowBox[{"[", 
              RowBox[{"i", "+", "1"}], "]"}], "]"}]}]}], ",", "1", ",", "0"}],
          "]"}], "&"}], ",", "d"}], "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "1", ",", 
       RowBox[{"Length", "[", "pos", "]"}], ",", "2"}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"chartcolors", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"rgbcolors", "[", 
      RowBox[{"[", "#", "]"}], "]"}], "&"}], "/@", "index"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"colorizedfeatures", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"ImageMultiply", "[", 
      RowBox[{"colorized", ",", "#"}], "]"}], "&"}], "/@", "features"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"viewpoints", "=", 
   RowBox[{"<|", 
    RowBox[{
     RowBox[{"\"\<top\>\"", "\[RuleDelayed]", "Top"}], ",", 
     RowBox[{"\"\<back\>\"", "\[RuleDelayed]", "Back"}], ",", 
     RowBox[{"\"\<left\>\"", "\[RuleDelayed]", "Left"}], ",", 
     RowBox[{"\"\<bottom\>\"", "\[RuleDelayed]", "Bottom"}], ",", 
     RowBox[{"\"\<front\>\"", "\[RuleDelayed]", "Front"}], ",", 
     RowBox[{"\"\<right\>\"", "\[RuleDelayed]", "Right"}]}], "|>"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"MapIndexed", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"Export", "[", 
       RowBox[{
        RowBox[{"StringReplace", "[", 
         RowBox[{"imagefile", ",", 
          RowBox[{"\"\<.\>\"", "\[Rule]", 
           RowBox[{"\"\<_\>\"", "<>", 
            RowBox[{"ToString", "[", 
             RowBox[{"First", "[", "#2", "]"}], "]"}], "<>", 
            "\"\<.\>\""}]}]}], "]"}], ",", 
        RowBox[{"Show", "[", 
         RowBox[{"#", ",", 
          RowBox[{"Boxed", "->", "False"}], ",", 
          RowBox[{"ViewPoint", "\[Rule]", 
           RowBox[{"viewpoints", "[", "face", "]"}]}]}], "]"}]}], "]"}], 
      "&"}], ",", "colorizedfeatures"}], "]"}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"intensity0", "=", "intensity"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"alpha0", "=", "alpha"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"rangeOfAlpha", "=", 
   RowBox[{"Range", "[", 
    RowBox[{"Length", "[", "alpha", "]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"First", "[", "intensity0", "]"}], ">", "0"}], ",", 
    RowBox[{
     RowBox[{"intensity0", "=", 
      RowBox[{"Join", "[", 
       RowBox[{
        RowBox[{"{", "0", "}"}], ",", "intensity0"}], "]"}]}], ";", 
     RowBox[{"alpha0", "=", 
      RowBox[{"Join", "[", 
       RowBox[{
        RowBox[{"{", "0", "}"}], ",", "alpha0"}], "]"}]}], ";", 
     RowBox[{"rangeOfAlpha", "+=", "1"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"Last", "[", "intensity0", "]"}], "<", "1"}], ",", 
     RowBox[{
      RowBox[{"intensity0", "=", 
       RowBox[{"Join", "[", 
        RowBox[{"intensity0", ",", 
         RowBox[{"{", "1", "}"}]}], "]"}]}], ";", 
      RowBox[{"alpha0", "=", 
       RowBox[{"Join", "[", 
        RowBox[{"alpha0", ",", 
         RowBox[{"{", "0", "}"}]}], "]"}]}]}]}], "]"}], ";"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"ListLinePlot", "[", 
    RowBox[{
     RowBox[{"Transpose", "[", 
      RowBox[{"{", 
       RowBox[{"intensity0", ",", "alpha0"}], "}"}], "]"}], ",", 
     RowBox[{"PlotRange", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"0", ",", "1"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"0", ",", "1"}], "}"}]}], "}"}]}], ",", 
     RowBox[{"ColorFunction", "\[Rule]", "rgbfunction"}], ",", 
     RowBox[{
     "PlotLegends", "\[Rule]", "\"\<user specified transfer function\>\""}]}],
     "]"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"fun", "=", 
    RowBox[{"Interpolation", "[", 
     RowBox[{
      RowBox[{"Transpose", "[", 
       RowBox[{"{", 
        RowBox[{"intensity0", ",", "alpha0"}], "}"}], "]"}], ",", 
      RowBox[{"InterpolationOrder", "\[Rule]", "1"}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"Plot", "[", 
    RowBox[{
     RowBox[{"fun", "[", "x", "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"x", ",", "0", ",", "1"}], "}"}], ",", 
     RowBox[{"PlotRange", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"0", ",", "1"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"0", ",", "1"}], "}"}]}], "}"}]}], ",", 
     RowBox[{"ColorFunction", "\[Rule]", "rgbfunction"}], ",", 
     RowBox[{
     "PlotLegends", "\[Rule]", "\"\<user specified transfer function\>\""}]}],
     "]"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"index0", "=", 
     RowBox[{"Flatten", "@", 
      RowBox[{"Position", "[", 
       RowBox[{"alpha0", ",", 
        RowBox[{"_", "?", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"#", ">", "0"}], "&"}], ")"}]}]}], "]"}]}]}], ";"}], 
   "*)"}]}]}], "Input"],

Cell[BoxData[{
 RowBox[{"top", ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "list", ",", "count", ",", "img", ",", "list2", ",", "list3", ",", 
      "d1"}], "}"}], ",", 
    RowBox[{"(*", " ", "top", " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"list", "=", 
      RowBox[{"Image3DSlices", "[", 
       RowBox[{"data", ",", "All", ",", "1"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"count", "=", 
      RowBox[{"Length", "[", "list", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"img", "=", 
      RowBox[{"First", "[", "list", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"list2", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"img", "=", 
          RowBox[{"ImageApply", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"#1", "+", 
              RowBox[{
               RowBox[{"Clip", "[", 
                RowBox[{
                 RowBox[{"1", "-", "#1"}], ",", 
                 RowBox[{"{", 
                  RowBox[{"0", ",", "1"}], "}"}]}], "]"}], "*", 
               RowBox[{"f", "[", "#2", "]"}]}]}], "&"}], ",", 
            RowBox[{"{", 
             RowBox[{"img", ",", 
              RowBox[{"list", "[", 
               RowBox[{"[", "i", "]"}], "]"}]}], "}"}]}], "]"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "2", ",", "count"}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"First", "[", "list", "]"}], "}"}], ",", "#"}], "]"}], 
        "&"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"list3", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"ImageSubtract", "[", 
          RowBox[{
           RowBox[{"list2", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"list2", "[", 
            RowBox[{"[", 
             RowBox[{"i", "-", "1"}], "]"}], "]"}]}], "]"}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "2", ",", "count"}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"First", "[", "list", "]"}], "}"}], ",", "#"}], "]"}], 
        "&"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"d1", "=", 
      RowBox[{"Image3D", "[", "list3", "]"}]}]}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"back", ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "list", ",", "count", ",", "img", ",", "list2", ",", "list3", ",", "tmp",
       ",", "d2"}], "}"}], ",", 
    RowBox[{"(*", " ", "back", " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"list", "=", 
      RowBox[{"Image3DSlices", "[", 
       RowBox[{"data", ",", "All", ",", "2"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"count", "=", 
      RowBox[{"Length", "[", "list", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"img", "=", 
      RowBox[{"First", "[", "list", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"list2", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"img", "=", 
          RowBox[{"ImageApply", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"#1", "+", 
              RowBox[{
               RowBox[{"Clip", "[", 
                RowBox[{
                 RowBox[{"1", "-", "#1"}], ",", 
                 RowBox[{"{", 
                  RowBox[{"0", ",", "1"}], "}"}]}], "]"}], "*", 
               RowBox[{"f", "[", "#2", "]"}]}]}], "&"}], ",", 
            RowBox[{"{", 
             RowBox[{"img", ",", 
              RowBox[{"list", "[", 
               RowBox[{"[", "i", "]"}], "]"}]}], "}"}]}], "]"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "2", ",", "count"}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"First", "[", "list", "]"}], "}"}], ",", "#"}], "]"}], 
        "&"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"list3", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"ImageSubtract", "[", 
          RowBox[{
           RowBox[{"list2", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"list2", "[", 
            RowBox[{"[", 
             RowBox[{"i", "-", "1"}], "]"}], "]"}]}], "]"}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "2", ",", "count"}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"First", "[", "list", "]"}], "}"}], ",", "#"}], "]"}], 
        "&"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"tmp", "=", 
      RowBox[{"Image3D", "[", 
       RowBox[{"Reverse", "[", "list3", "]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"d2", "=", 
      RowBox[{"ImageRotate", "[", 
       RowBox[{"tmp", ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"90", " ", "Degree"}], ",", 
          RowBox[{"{", 
           RowBox[{"1", ",", "0", ",", "0"}], "}"}]}], "}"}]}], "]"}]}]}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"left", ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "list", ",", "count", ",", "img", ",", "list2", ",", "list3", ",", "tmp",
       ",", "d3"}], "}"}], ",", 
    RowBox[{"(*", " ", "left", " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"list", "=", 
      RowBox[{"Image3DSlices", "[", 
       RowBox[{"data", ",", "All", ",", "3"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"count", "=", 
      RowBox[{"Length", "[", "list", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"img", "=", 
      RowBox[{"First", "[", "list", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"list2", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"img", "=", 
          RowBox[{"ImageApply", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"#1", "+", 
              RowBox[{
               RowBox[{"Clip", "[", 
                RowBox[{
                 RowBox[{"1", "-", "#1"}], ",", 
                 RowBox[{"{", 
                  RowBox[{"0", ",", "1"}], "}"}]}], "]"}], "*", 
               RowBox[{"f", "[", "#2", "]"}]}]}], "&"}], ",", 
            RowBox[{"{", 
             RowBox[{"img", ",", 
              RowBox[{"list", "[", 
               RowBox[{"[", "i", "]"}], "]"}]}], "}"}]}], "]"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "2", ",", "count"}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"First", "[", "list", "]"}], "}"}], ",", "#"}], "]"}], 
        "&"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"list3", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"ImageSubtract", "[", 
          RowBox[{
           RowBox[{"list2", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"list2", "[", 
            RowBox[{"[", 
             RowBox[{"i", "-", "1"}], "]"}], "]"}]}], "]"}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "2", ",", "count"}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"First", "[", "list", "]"}], "}"}], ",", "#"}], "]"}], 
        "&"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"tmp", "=", 
      RowBox[{"Image3D", "[", "list3", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"d3", "=", 
      RowBox[{
       RowBox[{"ImageRotate", "[", 
        RowBox[{"tmp", ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"90", " ", "Degree"}], ",", 
           RowBox[{"{", 
            RowBox[{"1", ",", "0", ",", "0"}], "}"}]}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"ImageRotate", "[", 
         RowBox[{"#", ",", 
          RowBox[{
           RowBox[{"-", "90"}], " ", "Degree"}]}], "]"}], "&"}]}]}]}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"bottom", ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "list", ",", "count", ",", "img", ",", "list2", ",", "list3", ",", 
      "d4"}], "}"}], ",", 
    RowBox[{"(*", " ", "bottom", " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"list", "=", 
      RowBox[{"Reverse", "@", 
       RowBox[{"Image3DSlices", "[", 
        RowBox[{"data", ",", "All", ",", "1"}], "]"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"count", "=", 
      RowBox[{"Length", "[", "list", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"img", "=", 
      RowBox[{"First", "[", "list", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"list2", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"img", "=", 
          RowBox[{"ImageApply", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"#1", "+", 
              RowBox[{
               RowBox[{"Clip", "[", 
                RowBox[{
                 RowBox[{"1", "-", "#1"}], ",", 
                 RowBox[{"{", 
                  RowBox[{"0", ",", "1"}], "}"}]}], "]"}], "*", 
               RowBox[{"f", "[", "#2", "]"}]}]}], "&"}], ",", 
            RowBox[{"{", 
             RowBox[{"img", ",", 
              RowBox[{"list", "[", 
               RowBox[{"[", "i", "]"}], "]"}]}], "}"}]}], "]"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "2", ",", "count"}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"First", "[", "list", "]"}], "}"}], ",", "#"}], "]"}], 
        "&"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"list3", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"ImageSubtract", "[", 
          RowBox[{
           RowBox[{"list2", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"list2", "[", 
            RowBox[{"[", 
             RowBox[{"i", "-", "1"}], "]"}], "]"}]}], "]"}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "2", ",", "count"}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"First", "[", "list", "]"}], "}"}], ",", "#"}], "]"}], 
        "&"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"d4", "=", 
      RowBox[{"Image3D", "[", 
       RowBox[{"Reverse", "[", "list3", "]"}], "]"}]}]}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"front", ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "list", ",", "count", ",", "img", ",", "list2", ",", "list3", ",", "tmp",
       ",", "d5"}], "}"}], ",", 
    RowBox[{"(*", " ", "front", " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"list", "=", 
      RowBox[{"Reverse", "@", 
       RowBox[{"Image3DSlices", "[", 
        RowBox[{"data", ",", "All", ",", "2"}], "]"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"count", "=", 
      RowBox[{"Length", "[", "list", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"img", "=", 
      RowBox[{"First", "[", "list", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"list2", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"img", "=", 
          RowBox[{"ImageApply", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"#1", "+", 
              RowBox[{
               RowBox[{"Clip", "[", 
                RowBox[{
                 RowBox[{"1", "-", "#1"}], ",", 
                 RowBox[{"{", 
                  RowBox[{"0", ",", "1"}], "}"}]}], "]"}], "*", 
               RowBox[{"f", "[", "#2", "]"}]}]}], "&"}], ",", 
            RowBox[{"{", 
             RowBox[{"img", ",", 
              RowBox[{"list", "[", 
               RowBox[{"[", "i", "]"}], "]"}]}], "}"}]}], "]"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "2", ",", "count"}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"First", "[", "list", "]"}], "}"}], ",", "#"}], "]"}], 
        "&"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"list3", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"ImageSubtract", "[", 
          RowBox[{
           RowBox[{"list2", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"list2", "[", 
            RowBox[{"[", 
             RowBox[{"i", "-", "1"}], "]"}], "]"}]}], "]"}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "2", ",", "count"}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"First", "[", "list", "]"}], "}"}], ",", "#"}], "]"}], 
        "&"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"tmp", "=", 
      RowBox[{"Image3D", "[", "list3", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"d5", "=", 
      RowBox[{"ImageRotate", "[", 
       RowBox[{"tmp", ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"90", " ", "Degree"}], ",", 
          RowBox[{"{", 
           RowBox[{"1", ",", "0", ",", "0"}], "}"}]}], "}"}]}], "]"}]}]}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"right", ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "list", ",", "count", ",", "img", ",", "list2", ",", "list3", ",", "tmp",
       ",", "d6"}], "}"}], ",", 
    RowBox[{"(*", " ", "right", " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"list", "=", 
      RowBox[{"Reverse", "@", 
       RowBox[{"Image3DSlices", "[", 
        RowBox[{"data", ",", "All", ",", "3"}], "]"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"count", "=", 
      RowBox[{"Length", "[", "list", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"img", "=", 
      RowBox[{"First", "[", "list", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"list2", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"img", "=", 
          RowBox[{"ImageApply", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"#1", "+", 
              RowBox[{
               RowBox[{"Clip", "[", 
                RowBox[{
                 RowBox[{"1", "-", "#1"}], ",", 
                 RowBox[{"{", 
                  RowBox[{"0", ",", "1"}], "}"}]}], "]"}], "*", 
               RowBox[{"f", "[", "#2", "]"}]}]}], "&"}], ",", 
            RowBox[{"{", 
             RowBox[{"img", ",", 
              RowBox[{"list", "[", 
               RowBox[{"[", "i", "]"}], "]"}]}], "}"}]}], "]"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "2", ",", "count"}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"First", "[", "list", "]"}], "}"}], ",", "#"}], "]"}], 
        "&"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"list3", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"ImageSubtract", "[", 
          RowBox[{
           RowBox[{"list2", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"list2", "[", 
            RowBox[{"[", 
             RowBox[{"i", "-", "1"}], "]"}], "]"}]}], "]"}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "2", ",", "count"}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"First", "[", "list", "]"}], "}"}], ",", "#"}], "]"}], 
        "&"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"tmp", "=", 
      RowBox[{"Image3D", "[", 
       RowBox[{"Reverse", "[", "list3", "]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"d6", "=", 
      RowBox[{
       RowBox[{"ImageRotate", "[", 
        RowBox[{"tmp", ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"90", " ", "Degree"}], ",", 
           RowBox[{"{", 
            RowBox[{"1", ",", "0", ",", "0"}], "}"}]}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"ImageRotate", "[", 
         RowBox[{"#", ",", 
          RowBox[{
           RowBox[{"-", "90"}], " ", "Degree"}]}], "]"}], "&"}]}]}]}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"renderslices", "=", 
   RowBox[{"<|", 
    RowBox[{
     RowBox[{"\"\<top\>\"", ":>", "top"}], ",", 
     RowBox[{"\"\<back\>\"", ":>", "back"}], ",", 
     RowBox[{"\"\<left\>\"", ":>", "left"}], ",", 
     RowBox[{"\"\<bottom\>\"", ":>", "bottom"}], ",", 
     RowBox[{"\"\<front\>\"", ":>", "front"}], ",", 
     RowBox[{"\"\<right\>\"", ":>", "right"}]}], "|>"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.653390381406852*^9, 3.6533903817039704`*^9}, {
   3.653390590977067*^9, 3.6533906202040243`*^9}, 3.653390775649913*^9, {
   3.6533908116802015`*^9, 3.653390869471839*^9}, {3.6533909245377426`*^9, 
   3.6533909544889555`*^9}, {3.6533914196586013`*^9, 3.6533914199242516`*^9}}],

Cell[BoxData[{
 RowBox[{"top2", ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "list", ",", "img", ",", "list2", ",", "list3", ",", "df", ",", "d1"}], 
     "}"}], ",", 
    RowBox[{"(*", " ", "top", " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"df", "=", 
      RowBox[{"ImageApply", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"f", "[", "#", "]"}], "&"}], ",", "data"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"list", "=", 
      RowBox[{"Image3DSlices", "[", 
       RowBox[{"df", ",", "All", ",", "1"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"img", "=", 
      RowBox[{"First", "[", "list", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"list2", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"img", "=", 
          RowBox[{"ImageAdd", "[", 
           RowBox[{"img", ",", 
            RowBox[{"ImageMultiply", "[", 
             RowBox[{
              RowBox[{"ImageClip", "@", 
               RowBox[{"ColorNegate", "[", "img", "]"}]}], ",", "i"}], 
             "]"}]}], "]"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", 
           RowBox[{"list", "[", 
            RowBox[{"[", 
             RowBox[{"2", ";;"}], "]"}], "]"}]}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Prepend", "[", 
         RowBox[{"#", ",", 
          RowBox[{"First", "[", "list", "]"}]}], "]"}], "&"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"list3", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"ImageSubtract", "[", 
          RowBox[{
           RowBox[{"list2", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"list2", "[", 
            RowBox[{"[", 
             RowBox[{"i", "-", "1"}], "]"}], "]"}]}], "]"}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "2", ",", 
           RowBox[{"Length", "[", "list", "]"}]}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Prepend", "[", 
         RowBox[{"#", ",", 
          RowBox[{"First", "[", "list", "]"}]}], "]"}], "&"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"d1", "=", 
      RowBox[{"Image3D", "[", "list3", "]"}]}]}]}], "\[IndentingNewLine]", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"back2", ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "list", ",", "img", ",", "list2", ",", "list3", ",", "tmp", ",", "df", 
      ",", "d2"}], "}"}], ",", 
    RowBox[{"(*", " ", "back", " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"df", "=", 
      RowBox[{"ImageApply", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"f", "[", "#", "]"}], "&"}], ",", "data"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"list", "=", 
      RowBox[{"Image3DSlices", "[", 
       RowBox[{"df", ",", "All", ",", "2"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"img", "=", 
      RowBox[{"First", "[", "list", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"list2", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"img", "=", 
          RowBox[{"ImageAdd", "[", 
           RowBox[{"img", ",", 
            RowBox[{"ImageMultiply", "[", 
             RowBox[{
              RowBox[{"ImageClip", "@", 
               RowBox[{"ColorNegate", "[", "img", "]"}]}], ",", "i"}], 
             "]"}]}], "]"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", 
           RowBox[{"list", "[", 
            RowBox[{"[", 
             RowBox[{"2", ";;"}], "]"}], "]"}]}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Prepend", "[", 
         RowBox[{"#", ",", 
          RowBox[{"First", "[", "list", "]"}]}], "]"}], "&"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"list3", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"ImageSubtract", "[", 
          RowBox[{
           RowBox[{"list2", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"list2", "[", 
            RowBox[{"[", 
             RowBox[{"i", "-", "1"}], "]"}], "]"}]}], "]"}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "2", ",", 
           RowBox[{"Length", "[", "list", "]"}]}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Prepend", "[", 
         RowBox[{"#", ",", 
          RowBox[{"First", "[", "list", "]"}]}], "]"}], "&"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"tmp", "=", 
      RowBox[{"Image3D", "[", 
       RowBox[{"Reverse", "[", "list3", "]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"d2", "=", 
      RowBox[{"ImageRotate", "[", 
       RowBox[{"tmp", ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"90", " ", "Degree"}], ",", 
          RowBox[{"{", 
           RowBox[{"1", ",", "0", ",", "0"}], "}"}]}], "}"}]}], "]"}]}]}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"left2", ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "list", ",", "img", ",", "list2", ",", "list3", ",", "tmp", ",", "df", 
      ",", "d3"}], "}"}], ",", 
    RowBox[{"(*", " ", "left", " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"df", "=", 
      RowBox[{"ImageApply", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"f", "[", "#", "]"}], "&"}], ",", "data"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"list", "=", 
      RowBox[{"Image3DSlices", "[", 
       RowBox[{"df", ",", "All", ",", "3"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"img", "=", 
      RowBox[{"First", "[", "list", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"list2", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"img", "=", 
          RowBox[{"ImageAdd", "[", 
           RowBox[{"img", ",", 
            RowBox[{"ImageMultiply", "[", 
             RowBox[{
              RowBox[{"ImageClip", "@", 
               RowBox[{"ColorNegate", "[", "img", "]"}]}], ",", "i"}], 
             "]"}]}], "]"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", 
           RowBox[{"list", "[", 
            RowBox[{"[", 
             RowBox[{"2", ";;"}], "]"}], "]"}]}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Prepend", "[", 
         RowBox[{"#", ",", 
          RowBox[{"First", "[", "list", "]"}]}], "]"}], "&"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"list3", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"ImageSubtract", "[", 
          RowBox[{
           RowBox[{"list2", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"list2", "[", 
            RowBox[{"[", 
             RowBox[{"i", "-", "1"}], "]"}], "]"}]}], "]"}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "2", ",", 
           RowBox[{"Length", "[", "list", "]"}]}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Prepend", "[", 
         RowBox[{"#", ",", 
          RowBox[{"First", "[", "list", "]"}]}], "]"}], "&"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"tmp", "=", 
      RowBox[{"Image3D", "[", "list3", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"d3", "=", 
      RowBox[{
       RowBox[{"ImageRotate", "[", 
        RowBox[{"tmp", ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"90", " ", "Degree"}], ",", 
           RowBox[{"{", 
            RowBox[{"1", ",", "0", ",", "0"}], "}"}]}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"ImageRotate", "[", 
         RowBox[{"#", ",", 
          RowBox[{
           RowBox[{"-", "90"}], " ", "Degree"}]}], "]"}], "&"}]}]}]}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"bottom2", ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "list", ",", "img", ",", "list2", ",", "list3", ",", "df", ",", "d4"}], 
     "}"}], ",", 
    RowBox[{"(*", " ", "bottom", " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"df", "=", 
      RowBox[{"ImageApply", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"f", "[", "#", "]"}], "&"}], ",", "data"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"list", "=", 
      RowBox[{"Reverse", "@", 
       RowBox[{"Image3DSlices", "[", 
        RowBox[{"df", ",", "All", ",", "1"}], "]"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"img", "=", 
      RowBox[{"First", "[", "list", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"list2", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"img", "=", 
          RowBox[{"ImageAdd", "[", 
           RowBox[{"img", ",", 
            RowBox[{"ImageMultiply", "[", 
             RowBox[{
              RowBox[{"ImageClip", "@", 
               RowBox[{"ColorNegate", "[", "img", "]"}]}], ",", "i"}], 
             "]"}]}], "]"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", 
           RowBox[{"list", "[", 
            RowBox[{"[", 
             RowBox[{"2", ";;"}], "]"}], "]"}]}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Prepend", "[", 
         RowBox[{"#", ",", 
          RowBox[{"First", "[", "list", "]"}]}], "]"}], "&"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"list3", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"ImageSubtract", "[", 
          RowBox[{
           RowBox[{"list2", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"list2", "[", 
            RowBox[{"[", 
             RowBox[{"i", "-", "1"}], "]"}], "]"}]}], "]"}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "2", ",", 
           RowBox[{"Length", "[", "list", "]"}]}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Prepend", "[", 
         RowBox[{"#", ",", 
          RowBox[{"First", "[", "list", "]"}]}], "]"}], "&"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"d4", "=", 
      RowBox[{"Image3D", "[", 
       RowBox[{"Reverse", "[", "list3", "]"}], "]"}]}]}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"front2", ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "list", ",", "img", ",", "list2", ",", "list3", ",", "tmp", ",", "df", 
      ",", "d5"}], "}"}], ",", 
    RowBox[{"(*", " ", "front", " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"df", "=", 
      RowBox[{"ImageApply", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"f", "[", "#", "]"}], "&"}], ",", "data"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"list", "=", 
      RowBox[{"Reverse", "@", 
       RowBox[{"Image3DSlices", "[", 
        RowBox[{"df", ",", "All", ",", "2"}], "]"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"img", "=", 
      RowBox[{"First", "[", "list", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"list2", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"img", "=", 
          RowBox[{"ImageAdd", "[", 
           RowBox[{"img", ",", 
            RowBox[{"ImageMultiply", "[", 
             RowBox[{
              RowBox[{"ImageClip", "@", 
               RowBox[{"ColorNegate", "[", "img", "]"}]}], ",", "i"}], 
             "]"}]}], "]"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", 
           RowBox[{"list", "[", 
            RowBox[{"[", 
             RowBox[{"2", ";;"}], "]"}], "]"}]}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Prepend", "[", 
         RowBox[{"#", ",", 
          RowBox[{"First", "[", "list", "]"}]}], "]"}], "&"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"list3", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"ImageSubtract", "[", 
          RowBox[{
           RowBox[{"list2", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"list2", "[", 
            RowBox[{"[", 
             RowBox[{"i", "-", "1"}], "]"}], "]"}]}], "]"}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "2", ",", 
           RowBox[{"Length", "[", "list", "]"}]}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Prepend", "[", 
         RowBox[{"#", ",", 
          RowBox[{"First", "[", "list", "]"}]}], "]"}], "&"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"tmp", "=", 
      RowBox[{"Image3D", "[", "list3", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"d5", "=", 
      RowBox[{"ImageRotate", "[", 
       RowBox[{"tmp", ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"90", " ", "Degree"}], ",", 
          RowBox[{"{", 
           RowBox[{"1", ",", "0", ",", "0"}], "}"}]}], "}"}]}], "]"}]}]}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"right2", ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "list", ",", "img", ",", "list2", ",", "list3", ",", "tmp", ",", "df", 
      ",", "d6"}], "}"}], ",", 
    RowBox[{"(*", " ", "right", " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"df", "=", 
      RowBox[{"ImageApply", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"f", "[", "#", "]"}], "&"}], ",", "data"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"list", "=", 
      RowBox[{"Reverse", "@", 
       RowBox[{"Image3DSlices", "[", 
        RowBox[{"df", ",", "All", ",", "3"}], "]"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"img", "=", 
      RowBox[{"First", "[", "list", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"list2", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"img", "=", 
          RowBox[{"ImageAdd", "[", 
           RowBox[{"img", ",", 
            RowBox[{"ImageMultiply", "[", 
             RowBox[{
              RowBox[{"ImageClip", "@", 
               RowBox[{"ColorNegate", "[", "img", "]"}]}], ",", "i"}], 
             "]"}]}], "]"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", 
           RowBox[{"list", "[", 
            RowBox[{"[", 
             RowBox[{"2", ";;"}], "]"}], "]"}]}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Prepend", "[", 
         RowBox[{"#", ",", 
          RowBox[{"First", "[", "list", "]"}]}], "]"}], "&"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"list3", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"ImageSubtract", "[", 
          RowBox[{
           RowBox[{"list2", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"list2", "[", 
            RowBox[{"[", 
             RowBox[{"i", "-", "1"}], "]"}], "]"}]}], "]"}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "2", ",", 
           RowBox[{"Length", "[", "list", "]"}]}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"Prepend", "[", 
         RowBox[{"#", ",", 
          RowBox[{"First", "[", "list", "]"}]}], "]"}], "&"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"tmp", "=", 
      RowBox[{"Image3D", "[", 
       RowBox[{"Reverse", "[", "list3", "]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"d6", "=", 
      RowBox[{
       RowBox[{"ImageRotate", "[", 
        RowBox[{"tmp", ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"90", " ", "Degree"}], ",", 
           RowBox[{"{", 
            RowBox[{"1", ",", "0", ",", "0"}], "}"}]}], "}"}]}], "]"}], "//", 
       RowBox[{
        RowBox[{"ImageRotate", "[", 
         RowBox[{"#", ",", 
          RowBox[{
           RowBox[{"-", "90"}], " ", "Degree"}]}], "]"}], "&"}]}]}]}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"renderslices2", "=", 
   RowBox[{"<|", 
    RowBox[{
     RowBox[{"\"\<top\>\"", ":>", "top2"}], ",", 
     RowBox[{"\"\<back\>\"", ":>", "back2"}], ",", 
     RowBox[{"\"\<left\>\"", ":>", "left2"}], ",", 
     RowBox[{"\"\<bottom\>\"", ":>", "bottom2"}], ",", 
     RowBox[{"\"\<front\>\"", ":>", "front2"}], ",", 
     RowBox[{"\"\<right\>\"", ":>", "right2"}]}], "|>"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.6533903859876237`*^9, 3.653390386315754*^9}, 
   3.653390592228038*^9, {3.6533906222841387`*^9, 3.6533906225341263`*^9}, {
   3.6533907050910063`*^9, 3.653390724347232*^9}, {3.6533910426423764`*^9, 
   3.6533910752363367`*^9}, 3.653391164293522*^9, {3.6533911974059334`*^9, 
   3.6533914334937663`*^9}, {3.653393937411039*^9, 3.6533939527707477`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"VisibilitySaliency", "[", "peaks_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "alpha", ",", "fun", ",", "vis", ",", "viss", ",", "vs", ",", "viss2", 
      ",", "vs2", ",", "mean", ",", "total", ",", "total2"}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"alpha", "=", "alpha0"}], ";", "\[IndentingNewLine]", 
     RowBox[{"MapIndexed", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{"alpha", "[", 
           RowBox[{"[", "#", "]"}], "]"}], "=", 
          RowBox[{"peaks", "[", 
           RowBox[{"[", 
            RowBox[{"First", "@", "#2"}], "]"}], "]"}]}], ")"}], "&"}], ",", 
       "index0"}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"fun", "=", 
      RowBox[{"Interpolation", "[", 
       RowBox[{
        RowBox[{"Transpose", "[", 
         RowBox[{"{", 
          RowBox[{"intensity0", ",", "alpha"}], "}"}], "]"}], ",", 
        RowBox[{"InterpolationOrder", "\[Rule]", "1"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"vis", "=", 
      RowBox[{"Block", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"f", "=", "fun"}], ",", 
          RowBox[{"data", "=", "d"}]}], "}"}], ",", 
        RowBox[{"renderslices2", "[", "face", "]"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"viss", "=", 
      RowBox[{"ImageMultiply", "[", 
       RowBox[{"g1", ",", "vis"}], "]"}]}], ";", 
     RowBox[{"(*", " ", 
      RowBox[{"weighted", " ", "by", " ", "lightness", " ", "DoG", " ", 
       RowBox[{"(", 
        RowBox[{"difference", " ", "of", " ", "Gaussians"}], ")"}]}], " ", 
      "*)"}], "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
       RowBox[{"vs", "=", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"ImageMeasurements", "[", 
            RowBox[{
             RowBox[{"ImageMultiply", "[", 
              RowBox[{"viss", ",", "i"}], "]"}], ",", 
             "\"\<TotalIntensity\>\""}], "]"}], "/", 
           RowBox[{"ImageMeasurements", "[", 
            RowBox[{"viss", ",", "\"\<TotalIntensity\>\""}], "]"}]}], ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "features"}], "}"}]}], "]"}]}], ";"}], "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"total", "=", 
      RowBox[{"ImageMeasurements", "[", 
       RowBox[{"viss", ",", "\"\<TotalIntensity\>\""}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"vs", "=", 
      RowBox[{"Table", "[", 
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"total", "\[NotEqual]", "0"}], ",", 
          RowBox[{
           RowBox[{"ImageMeasurements", "[", 
            RowBox[{
             RowBox[{"ImageMultiply", "[", 
              RowBox[{"viss", ",", "i"}], "]"}], ",", 
             "\"\<TotalIntensity\>\""}], "]"}], "/", "total"}], ",", "0"}], 
         "]"}], ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", "features"}], "}"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"viss2", "=", 
      RowBox[{"ImageMultiply", "[", 
       RowBox[{"g2", ",", "vis"}], "]"}]}], ";", 
     RowBox[{"(*", " ", 
      RowBox[{"weighted", " ", "by", " ", "chroma", " ", "DoG"}], " ", "*)"}],
      "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
       RowBox[{"vs2", "=", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"ImageMeasurements", "[", 
            RowBox[{
             RowBox[{"ImageMultiply", "[", 
              RowBox[{"viss2", ",", "i"}], "]"}], ",", 
             "\"\<TotalIntensity\>\""}], "]"}], "/", 
           RowBox[{"ImageMeasurements", "[", 
            RowBox[{"viss2", ",", "\"\<TotalIntensity\>\""}], "]"}]}], ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "features"}], "}"}]}], "]"}]}], ";"}], "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"total2", "=", 
      RowBox[{"ImageMeasurements", "[", 
       RowBox[{"viss2", ",", "\"\<TotalIntensity\>\""}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"vs2", "=", 
      RowBox[{"Table", "[", 
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"total2", "\[NotEqual]", "0"}], ",", 
          RowBox[{
           RowBox[{"ImageMeasurements", "[", 
            RowBox[{
             RowBox[{"ImageMultiply", "[", 
              RowBox[{"viss2", ",", "i"}], "]"}], ",", 
             "\"\<TotalIntensity\>\""}], "]"}], "/", "total2"}], ",", "0"}], 
         "]"}], ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", "features"}], "}"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"mean", "=", 
      RowBox[{"Mean", "[", 
       RowBox[{"{", 
        RowBox[{"vs", ",", "vs2"}], "}"}], "]"}]}]}]}], "\[IndentingNewLine]",
    "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Visibility", "[", "fun_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "vis", ",", "viss", ",", "vs", ",", "viss2", ",", "vs2", ",", "mean", 
      ",", "total", ",", "total2"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"vis", "=", 
      RowBox[{"Block", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"f", "=", "fun"}], ",", 
          RowBox[{"data", "=", "d"}]}], "}"}], ",", 
        RowBox[{"renderslices2", "[", "face", "]"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"viss", "=", 
      RowBox[{"ImageMultiply", "[", 
       RowBox[{"g1", ",", "vis"}], "]"}]}], ";", 
     RowBox[{"(*", " ", 
      RowBox[{"weighted", " ", "by", " ", "lightness", " ", "DoG", " ", 
       RowBox[{"(", 
        RowBox[{"difference", " ", "of", " ", "Gaussians"}], ")"}]}], " ", 
      "*)"}], "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
       RowBox[{"vs", "=", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"ImageMeasurements", "[", 
            RowBox[{
             RowBox[{"ImageMultiply", "[", 
              RowBox[{"viss", ",", "i"}], "]"}], ",", 
             "\"\<TotalIntensity\>\""}], "]"}], "/", 
           RowBox[{"ImageMeasurements", "[", 
            RowBox[{"viss", ",", "\"\<TotalIntensity\>\""}], "]"}]}], ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "features"}], "}"}]}], "]"}]}], ";"}], "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"total", "=", 
      RowBox[{"ImageMeasurements", "[", 
       RowBox[{"viss", ",", "\"\<TotalIntensity\>\""}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"vs", "=", 
      RowBox[{"ParallelTable", "[", 
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"total", "\[NotEqual]", "0"}], ",", 
          RowBox[{
           RowBox[{"ImageMeasurements", "[", 
            RowBox[{
             RowBox[{"ImageMultiply", "[", 
              RowBox[{"viss", ",", "i"}], "]"}], ",", 
             "\"\<TotalIntensity\>\""}], "]"}], "/", "total"}], ",", "0"}], 
         "]"}], ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", "features"}], "}"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"viss2", "=", 
      RowBox[{"ImageMultiply", "[", 
       RowBox[{"g2", ",", "vis"}], "]"}]}], ";", 
     RowBox[{"(*", " ", 
      RowBox[{"weighted", " ", "by", " ", "chroma", " ", "DoG"}], " ", "*)"}],
      "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
       RowBox[{"vs2", "=", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"ImageMeasurements", "[", 
            RowBox[{
             RowBox[{"ImageMultiply", "[", 
              RowBox[{"viss2", ",", "i"}], "]"}], ",", 
             "\"\<TotalIntensity\>\""}], "]"}], "/", 
           RowBox[{"ImageMeasurements", "[", 
            RowBox[{"viss2", ",", "\"\<TotalIntensity\>\""}], "]"}]}], ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "features"}], "}"}]}], "]"}]}], ";"}], "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"total2", "=", 
      RowBox[{"ImageMeasurements", "[", 
       RowBox[{"viss2", ",", "\"\<TotalIntensity\>\""}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"vs2", "=", 
      RowBox[{"ParallelTable", "[", 
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"total2", "\[NotEqual]", "0"}], ",", 
          RowBox[{
           RowBox[{"ImageMeasurements", "[", 
            RowBox[{
             RowBox[{"ImageMultiply", "[", 
              RowBox[{"viss2", ",", "i"}], "]"}], ",", 
             "\"\<TotalIntensity\>\""}], "]"}], "/", "total2"}], ",", "0"}], 
         "]"}], ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", "features"}], "}"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"mean", "=", 
      RowBox[{"Mean", "[", 
       RowBox[{"{", 
        RowBox[{"vs", ",", "vs2"}], "}"}], "]"}]}]}]}], "\[IndentingNewLine]",
    "]"}]}]}], "Input",
 CellChangeTimes->{{3.652987001377157*^9, 3.652987030223106*^9}, {
   3.6529870625748034`*^9, 3.6529871734513144`*^9}, 3.6529873541603017`*^9, {
   3.652987638281007*^9, 3.652987652353901*^9}, 3.6529877735890985`*^9, {
   3.6529878690570374`*^9, 3.652987916409946*^9}, {3.652988226637104*^9, 
   3.6529882295885124`*^9}, {3.6529883741048403`*^9, 3.6529884271388826`*^9}, 
   3.652989020429822*^9, 3.653221573427886*^9, {3.65322161206022*^9, 
   3.6532216139279184`*^9}, 3.6532216668193874`*^9, 3.6532219082499895`*^9, {
   3.6533932795890865`*^9, 3.6533933037017727`*^9}, {3.653395654590644*^9, 
   3.6533958555038524`*^9}, {3.6533958943044233`*^9, 3.6533959915818834`*^9}, 
   3.6533960381069093`*^9, {3.6534240899421754`*^9, 3.6534240925844336`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Clear", "[", "f", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Clear", "[", "data", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"vis", "=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"f", "=", "fun"}], ",", 
       RowBox[{"data", "=", "d"}]}], "}"}], ",", 
     RowBox[{"renderslices2", "[", "face", "]"}]}], "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.6500215264129553`*^9, 3.650021533651047*^9}, {
   3.6500216405604234`*^9, 3.6500216408404727`*^9}, {3.650021911258396*^9, 
   3.6500219116333833`*^9}, {3.650022247470479*^9, 3.650022247939203*^9}, 
   3.6500224427254667`*^9, {3.6500224792985053`*^9, 3.6500224802269278`*^9}, {
   3.65002263181735*^9, 3.6500226711148643`*^9}, {3.6501077999405737`*^9, 
   3.6501078003468246`*^9}, {3.6501383365437007`*^9, 3.65013833680936*^9}, 
   3.6502765346439424`*^9, 3.653234656610555*^9, 3.6534139132203226`*^9, {
   3.653414210989826*^9, 3.6534142255903463`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"visibility", "=", 
  RowBox[{"ParallelTable", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"ImageMeasurements", "[", 
      RowBox[{
       RowBox[{"ImageMultiply", "[", 
        RowBox[{"vis", ",", 
         RowBox[{"features", "[", 
          RowBox[{"[", "i", "]"}], "]"}]}], "]"}], ",", 
       "\"\<TotalIntensity\>\""}], "]"}], "/", 
     RowBox[{"ImageMeasurements", "[", 
      RowBox[{"vis", ",", "\"\<TotalIntensity\>\""}], "]"}]}], ",", 
    RowBox[{"{", 
     RowBox[{"i", ",", 
      RowBox[{"Length", "[", "features", "]"}]}], "}"}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"chart1", "=", 
  RowBox[{"BarChart", "[", 
   RowBox[{"visibility", ",", 
    RowBox[{"PlotLabel", "\[Rule]", "\"\<Visibility\>\""}], ",", 
    RowBox[{"ChartLegends", "\[Rule]", "legends"}], ",", 
    RowBox[{"ChartStyle", "\[Rule]", 
     RowBox[{"Darker", "@", "chartcolors"}]}], ",", 
    RowBox[{"ChartLabels", "\[Rule]", 
     RowBox[{"Placed", "[", 
      RowBox[{
       RowBox[{"ToString", "/@", "visibility"}], ",", "Above"}], "]"}]}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dog", "=", "g1"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"saliency", "=", 
  RowBox[{"ParallelTable", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"ImageMeasurements", "[", 
      RowBox[{
       RowBox[{"ImageMultiply", "[", 
        RowBox[{"dog", ",", 
         RowBox[{"features", "[", 
          RowBox[{"[", "i", "]"}], "]"}]}], "]"}], ",", 
       "\"\<TotalIntensity\>\""}], "]"}], "/", 
     RowBox[{"ImageMeasurements", "[", 
      RowBox[{"dog", ",", "\"\<TotalIntensity\>\""}], "]"}]}], ",", 
    RowBox[{"{", 
     RowBox[{"i", ",", 
      RowBox[{"Length", "[", "features", "]"}]}], "}"}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"chart0", "=", 
  RowBox[{"BarChart", "[", 
   RowBox[{"saliency", ",", 
    RowBox[{"PlotLabel", "\[Rule]", "\"\<Saliency\>\""}], ",", 
    RowBox[{"ChartLegends", "\[Rule]", "legends"}], ",", 
    RowBox[{"ChartStyle", "\[Rule]", 
     RowBox[{"Darker", "@", 
      RowBox[{"Darker", "@", "chartcolors"}]}]}], ",", 
    RowBox[{"ChartLabels", "\[Rule]", 
     RowBox[{"Placed", "[", 
      RowBox[{
       RowBox[{"ToString", "/@", "saliency"}], ",", "Above"}], "]"}]}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"viss", "=", 
    RowBox[{"ImageMultiply", "[", 
     RowBox[{"g1", ",", "vis"}], "]"}]}], ";"}], 
  RowBox[{"(*", " ", 
   RowBox[{"weighted", " ", "by", " ", "lightness", " ", "DoG", " ", 
    RowBox[{"(", 
     RowBox[{"difference", " ", "of", " ", "Gaussians"}], ")"}]}], " ", 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"vs", "=", 
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"ImageMeasurements", "[", 
         RowBox[{
          RowBox[{"ImageMultiply", "[", 
           RowBox[{"viss", ",", "i"}], "]"}], ",", "\"\<TotalIntensity\>\""}],
          "]"}], "/", 
        RowBox[{"ImageMeasurements", "[", 
         RowBox[{"viss", ",", "\"\<TotalIntensity\>\""}], "]"}]}], ",", 
       RowBox[{"{", 
        RowBox[{"i", ",", "features"}], "}"}]}], "]"}]}], ";"}], 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"total", "=", 
   RowBox[{"ImageMeasurements", "[", 
    RowBox[{"viss", ",", "\"\<TotalIntensity\>\""}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"vs", "=", 
   RowBox[{"ParallelTable", "[", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"total", "\[NotEqual]", "0"}], ",", 
       RowBox[{
        RowBox[{"ImageMeasurements", "[", 
         RowBox[{
          RowBox[{"ImageMultiply", "[", 
           RowBox[{"viss", ",", "i"}], "]"}], ",", "\"\<TotalIntensity\>\""}],
          "]"}], "/", "total"}], ",", "0"}], "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "features"}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"chart2", "=", 
  RowBox[{"BarChart", "[", 
   RowBox[{"vs", ",", 
    RowBox[{
    "PlotLabel", "\[Rule]", 
     "\"\<Visibility-weighted saliency of brightness\>\""}], ",", 
    RowBox[{"ChartLegends", "\[Rule]", "legends"}], ",", 
    RowBox[{"ChartStyle", "\[Rule]", 
     RowBox[{"Lighter", "@", "chartcolors"}]}], ",", 
    RowBox[{"ChartLabels", "\[Rule]", 
     RowBox[{"Placed", "[", 
      RowBox[{
       RowBox[{"ToString", "/@", "vs"}], ",", "Above"}], "]"}]}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"viss2", "=", 
    RowBox[{"ImageMultiply", "[", 
     RowBox[{"g2", ",", "vis"}], "]"}]}], ";"}], 
  RowBox[{"(*", " ", 
   RowBox[{"weighted", " ", "by", " ", "chroma", " ", "DoG"}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"vs2", "=", 
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"ImageMeasurements", "[", 
         RowBox[{
          RowBox[{"ImageMultiply", "[", 
           RowBox[{"viss2", ",", "i"}], "]"}], ",", 
          "\"\<TotalIntensity\>\""}], "]"}], "/", 
        RowBox[{"ImageMeasurements", "[", 
         RowBox[{"viss2", ",", "\"\<TotalIntensity\>\""}], "]"}]}], ",", 
       RowBox[{"{", 
        RowBox[{"i", ",", "features"}], "}"}]}], "]"}]}], ";"}], 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"total2", "=", 
   RowBox[{"ImageMeasurements", "[", 
    RowBox[{"viss2", ",", "\"\<TotalIntensity\>\""}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"vs2", "=", 
   RowBox[{"ParallelTable", "[", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"total2", "\[NotEqual]", "0"}], ",", 
       RowBox[{
        RowBox[{"ImageMeasurements", "[", 
         RowBox[{
          RowBox[{"ImageMultiply", "[", 
           RowBox[{"viss2", ",", "i"}], "]"}], ",", 
          "\"\<TotalIntensity\>\""}], "]"}], "/", "total2"}], ",", "0"}], 
      "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "features"}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"chart2b", "=", 
  RowBox[{"BarChart", "[", 
   RowBox[{"vs2", ",", 
    RowBox[{
    "PlotLabel", "\[Rule]", 
     "\"\<Visibility-weighted saliency of saturation\>\""}], ",", 
    RowBox[{"ChartLegends", "\[Rule]", "legends"}], ",", 
    RowBox[{"ChartStyle", "\[Rule]", 
     RowBox[{"Lighter", "@", "chartcolors"}]}], ",", 
    RowBox[{"ChartLabels", "\[Rule]", 
     RowBox[{"Placed", "[", 
      RowBox[{
       RowBox[{"ToString", "/@", "vs2"}], ",", "Above"}], "]"}]}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"mean", "=", 
  RowBox[{"Mean", "[", 
   RowBox[{"{", 
    RowBox[{"vs", ",", "vs2"}], "}"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"weighted", "=", 
  RowBox[{"BarChart", "[", 
   RowBox[{"mean", ",", 
    RowBox[{"PlotLabel", "\[Rule]", "\"\<Visibility-weighted saliency\>\""}], 
    ",", 
    RowBox[{"ChartLegends", "\[Rule]", "legends"}], ",", 
    RowBox[{"ChartStyle", "\[Rule]", "chartcolors"}], ",", 
    RowBox[{"ChartLabels", "\[Rule]", 
     RowBox[{"Placed", "[", 
      RowBox[{
       RowBox[{"ToString", "/@", "mean"}], ",", "Above"}], "]"}]}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"charts", "=", 
   RowBox[{"{", 
    RowBox[{
    "chart0", ",", "chart1", ",", "chart2", ",", "chart2b", ",", "weighted"}],
     "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"scores", "=", 
   RowBox[{"{", 
    RowBox[{
    "saliency", ",", "visibility", ",", "vs", ",", "vs2", ",", "mean"}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"Export", "[", 
      RowBox[{
       RowBox[{"imagefilenames", "[", 
        RowBox[{"[", "i", "]"}], "]"}], ",", 
       RowBox[{"charts", "[", 
        RowBox[{"[", "i", "]"}], "]"}]}], "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", 
       RowBox[{"Length", "[", "charts", "]"}]}], "}"}]}], "]"}], ";"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"Table", "[", 
     RowBox[{
      RowBox[{"Export", "[", 
       RowBox[{
        RowBox[{"txtfilenames", "[", 
         RowBox[{"[", "i", "]"}], "]"}], ",", 
        RowBox[{"scores", "[", 
         RowBox[{"[", "i", "]"}], "]"}]}], "]"}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", 
        RowBox[{"Length", "[", "scores", "]"}]}], "}"}]}], "]"}], ";"}], 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"scoremap", "=", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{"FileExistsQ", "[", "resultxml", "]"}], ",", 
     RowBox[{"Association", "@", 
      RowBox[{"Import", "[", "resultxml", "]"}]}], ",", 
     RowBox[{"<|", "|>"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"AssociateTo", "[", 
   RowBox[{"scoremap", ",", 
    RowBox[{"dataname", "\[Rule]", "scores"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Export", "[", 
   RowBox[{"resultxml", ",", 
    RowBox[{"Normal", "[", "scoremap", "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"w", "=", 
   RowBox[{
    RowBox[{"ImageAdd", "[", 
     RowBox[{"viss", ",", "viss2"}], "]"}], "//", "ImageAdjust"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"results", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"ImageMultiply", "[", 
      RowBox[{"w", ",", "#"}], "]"}], "&"}], "/@", "features"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MapIndexed", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"Export", "[", 
      RowBox[{
       RowBox[{"StringReplace", "[", 
        RowBox[{"featurefilename", ",", 
         RowBox[{"\"\<.\>\"", "->", 
          RowBox[{
           RowBox[{"ToString", "[", 
            RowBox[{"First", "[", "#2", "]"}], "]"}], "<>", "\"\<.\>\""}]}]}],
         "]"}], ",", "#"}], "]"}], "&"}], ",", "results"}], "]"}], 
  ";"}]}], "Input",
 CellChangeTimes->{{3.6439647425517*^9, 3.6439647428532557`*^9}, {
   3.6439713958739185`*^9, 3.6439714129571934`*^9}, {3.6439761211679015`*^9, 
   3.643976132418293*^9}, 3.643976643836796*^9, {3.64397733357181*^9, 
   3.6439773460162888`*^9}, 3.6439994569259024`*^9, {3.6500086737752275`*^9, 
   3.650008675158549*^9}, {3.6500087914131174`*^9, 3.650008803734063*^9}, {
   3.6500124588147187`*^9, 3.6500124890357747`*^9}, {3.650013937122326*^9, 
   3.650013940447262*^9}, {3.650015317972989*^9, 3.650015318318883*^9}, 
   3.650016093225711*^9, 3.650016341712489*^9, 3.650021537159854*^9, {
   3.6500224885785704`*^9, 3.650022489000445*^9}, {3.650049735413189*^9, 
   3.650049773578404*^9}, {3.650049811475926*^9, 3.6500498226339707`*^9}, {
   3.650107802987437*^9, 3.650107803755533*^9}, {3.650138284576641*^9, 
   3.6501382962472525`*^9}, {3.650138332892003*^9, 3.650138334265869*^9}, {
   3.6502714097645626`*^9, 3.650271410797679*^9}, 3.6502729289610157`*^9, {
   3.6502739157020273`*^9, 3.6502739166851397`*^9}, {3.650371878406669*^9, 
   3.6503718816538696`*^9}, {3.6503719718543053`*^9, 3.650372005522294*^9}, {
   3.6524422694226513`*^9, 3.652442284032587*^9}, {3.6524442949349627`*^9, 
   3.6524443554604664`*^9}, {3.6524444046305103`*^9, 3.652444423958295*^9}, {
   3.6534140820952573`*^9, 3.653414127672003*^9}, {3.653414169729652*^9, 
   3.6534142018548374`*^9}, {3.653423915130591*^9, 3.6534239190842485`*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "0.4528066871262315`", ",", "0.36670731066773715`", ",", 
   "0.1804860022060313`"}], "}"}]], "Output",
 CellChangeTimes->{
  3.6500164027849245`*^9, 3.650016790358*^9, 3.650016860472441*^9, 
   3.6500170648135443`*^9, 3.6500178430964127`*^9, 3.6500183226052322`*^9, 
   3.650018401315884*^9, 3.650018565209202*^9, 3.6500186677396812`*^9, 
   3.6500189383934865`*^9, 3.650019539619196*^9, 3.650019983558324*^9, 
   3.650022738542828*^9, 3.6500257578638835`*^9, 3.6500396248037796`*^9, 
   3.6500398939700356`*^9, 3.650039993846919*^9, 3.650044483047104*^9, 
   3.6500452714722476`*^9, 3.6500499264109244`*^9, 3.650097074255372*^9, 
   3.6500973581328783`*^9, {3.650107354131773*^9, 3.65010735811481*^9}, 
   3.6501074363364735`*^9, 3.650107673680025*^9, 3.6501077926744156`*^9, 
   3.650107890363799*^9, 3.6501080811981897`*^9, 3.6501312378482943`*^9, 
   3.650131363033738*^9, 3.650131726555977*^9, 3.650138276227208*^9, 
   3.6501385284111557`*^9, 3.6501385625454597`*^9, 3.650140794485876*^9, 
   3.6502668310824347`*^9, 3.650276401576001*^9, 3.650371328121809*^9, 
   3.650371653895817*^9, 3.6503718611229467`*^9, 3.6503720385522165`*^9, 
   3.6503721627137003`*^9, 3.6512707685633197`*^9, 3.651273965610647*^9, 
   3.652009950004625*^9, 3.6520100365119658`*^9, 3.6523863309957137`*^9, 
   3.652386408425874*^9, 3.6523947270486937`*^9, 3.652444110292267*^9, 
   3.65246574776667*^9, 3.652466832950224*^9, 3.6524672418232903`*^9, 
   3.652467336058529*^9, 3.652467912529995*^9, 3.652468634130485*^9, 
   3.6524688744380474`*^9, 3.652469130516101*^9, {3.652469285790495*^9, 
   3.652469310025891*^9}, 3.6532353440720835`*^9, 3.6532368561304903`*^9, 
   3.653414274960363*^9, 3.6534144991058645`*^9, 3.6534242505981517`*^9, 
   3.653424320530247*^9, 3.6534244679743*^9, 3.653424632413035*^9, 
   3.6534252362133994`*^9, 3.6534262562036114`*^9}],

Cell[BoxData[
 TemplateBox[{GraphicsBox[{{
      Opacity[0], 
      PointBox[{0.48597994530537825`, 0.}]}, {{}, {
       Directive[
        EdgeForm[
         Directive[
          Thickness[Small], 
          Opacity[0.6789999999999999]]], 
        RGBColor[0.982864, 0.7431472, 0.3262672]], {{
         Directive[
          EdgeForm[
           Directive[
            Thickness[Small], 
            Opacity[0.6789999999999999]]], 
          RGBColor[0., 0.4444444444444444, 0.6666666666666667]], 
         TagBox[
          TooltipBox[
           TagBox[
            DynamicBox[{
              FEPrivate`If[
               CurrentValue["MouseOver"], 
               EdgeForm[{
                 GrayLevel[0.5], 
                 AbsoluteThickness[1.5], 
                 Opacity[0.66]}], {}, {}], 
              
              RectangleBox[{0.544211485870556, 0.}, {1.455788514129444, 
               0.4528066871262315}, "RoundingRadius" -> 0]}], 
            StatusArea[#, 0.4528066871262315]& , TagBoxNote -> 
            "0.4528066871262315"], 
           StyleBox["0.4528066871262315`", {}, StripOnInput -> False]], 
          Annotation[#, 
           Style[0.4528066871262315, {}], "Tooltip"]& ]}, {
         Directive[
          EdgeForm[
           Directive[
            Thickness[Small], 
            Opacity[0.6789999999999999]]], 
          RGBColor[0.6666666666666667, 0., 0.]], 
         TagBox[
          TooltipBox[
           TagBox[
            DynamicBox[{
              FEPrivate`If[
               CurrentValue["MouseOver"], 
               EdgeForm[{
                 GrayLevel[0.5], 
                 AbsoluteThickness[1.5], 
                 Opacity[0.66]}], {}, {}], 
              
              RectangleBox[{1.544211485870556, 0.}, {2.455788514129444, 
               0.36670731066773715`}, "RoundingRadius" -> 0]}], 
            StatusArea[#, 0.36670731066773715`]& , TagBoxNote -> 
            "0.36670731066773715"], 
           StyleBox["0.36670731066773715`", {}, StripOnInput -> False]], 
          Annotation[#, 
           Style[0.36670731066773715`, {}], "Tooltip"]& ]}, {
         Directive[
          EdgeForm[
           Directive[
            Thickness[Small], 
            Opacity[0.6789999999999999]]], 
          RGBColor[0.6666666666666667, 0.6666666666666667, 0.]], 
         TagBox[
          TooltipBox[
           TagBox[
            DynamicBox[{
              FEPrivate`If[
               CurrentValue["MouseOver"], 
               EdgeForm[{
                 GrayLevel[0.5], 
                 AbsoluteThickness[1.5], 
                 Opacity[0.66]}], {}, {}], 
              
              RectangleBox[{2.544211485870556, 0.}, {3.455788514129444, 
               0.1804860022060313}, "RoundingRadius" -> 0]}], 
            StatusArea[#, 0.1804860022060313]& , TagBoxNote -> 
            "0.1804860022060313"], 
           StyleBox["0.1804860022060313`", {}, StripOnInput -> False]], 
          Annotation[#, 
           Style[0.1804860022060313, {}], "Tooltip"]& ]}}}, {}, {}}, {}, {
      InsetBox[
       FormBox[
        StyleBox["\"0.452807\"", {
          Directive[], 
          Directive[]}, StripOnInput -> False], TraditionalForm], 
       Offset[{0, 4}, {1., 0.4528066871262315}], 
       ImageScaled[{0.5, 0}]], 
      InsetBox[
       FormBox[
        StyleBox["\"0.366707\"", {
          Directive[], 
          Directive[]}, StripOnInput -> False], TraditionalForm], 
       Offset[{0, 4}, {2., 0.36670731066773715`}], 
       ImageScaled[{0.5, 0}]], 
      InsetBox[
       FormBox[
        StyleBox["\"0.180486\"", {
          Directive[], 
          Directive[]}, StripOnInput -> False], TraditionalForm], 
       Offset[{0, 4}, {3., 0.1804860022060313}], 
       ImageScaled[{0.5, 0}]]}, {
      StyleBox[{Antialiasing -> False, {
         Directive[
          Thickness[Tiny]], {
          LineBox[{{0.48597994530537825`, 0.}, {3.5151846855059254`, 0.}}]}, 
         StyleBox[{}, "GraphicsLabel", StripOnInput -> False]}, 
        StyleBox[{{
           Directive[
            Thickness[Tiny]], 
           LineBox[{{0.544211485870556, 0.}, 
             
             Offset[{-1.102182119232618*^-15, -6.}, {0.544211485870556, 
              0.}]}], 
           LineBox[{{3.455788514129444, 0.}, 
             
             Offset[{-1.102182119232618*^-15, -6.}, {3.455788514129444, 
              0.}]}], {{}, {}, {}, {}, {}}}, 
          StyleBox[{}, "GraphicsLabel", StripOnInput -> False]}, 
         "GraphicsTicks", StripOnInput -> False]}, "GraphicsAxes", 
       StripOnInput -> False]}}, {
    AspectRatio -> NCache[GoldenRatio^(-1), 0.6180339887498948], 
     Axes -> {False, True}, AxesLabel -> {None, None}, 
     AxesOrigin -> {0.48597994530537825`, 0.}, 
     CoordinatesToolOptions -> {"DisplayFunction" -> ({
         Identity[
          Part[#, 1]], 
         Identity[
          Part[#, 2]]}& ), "CopiedValueFunction" -> ({
         Identity[
          Part[#, 1]], 
         Identity[
          Part[#, 2]]}& )}, FrameLabel -> {{None, None}, {None, None}}, 
     FrameTicks -> {{Automatic, Automatic}, {{{1., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {2., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {3., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}}, {{1., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {2., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {3., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}}}}, 
     GridLines -> {None, None}, GridLinesStyle -> Directive[
       GrayLevel[0.5, 0.4]], PlotLabel -> 
     FormBox["\"Visibility\"", TraditionalForm], 
     PlotRange -> {{All, All}, {All, All}}, PlotRangePadding -> {{
        Scaled[0.02], 
        Scaled[0.02]}, {
        Scaled[0.02], 
        Scaled[0.05]}}, Ticks -> {None, Automatic}}],FormBox[
    FormBox[
     TemplateBox[{
      "\"Feature 1\"", "\"Feature 2\"", "\"Feature 3\"", "\"Feature 4\""}, 
      "SwatchLegend", DisplayFunction -> (FormBox[
        StyleBox[
         StyleBox[
          PaneBox[
           TagBox[
            GridBox[{{
               TagBox[
                GridBox[{{
                   GraphicsBox[{
                    Directive[
                    PointSize[0.5], 
                    AbsoluteThickness[1.6], 
                    EdgeForm[
                    Directive[
                    GrayLevel[0], 
                    Thickness[Small], 
                    Opacity[0.6789999999999999]]], 
                    RGBColor[0., 0.4444444444444444, 0.6666666666666667]], 
                    RectangleBox[{0, 0}, {10, 10}, "RoundingRadius" -> 0]}, 
                    AspectRatio -> Full, ImageSize -> {10, 10}, 
                    PlotRangePadding -> None, ImagePadding -> Automatic, 
                    BaselinePosition -> (Scaled[0.1] -> Baseline)], #}, {
                   GraphicsBox[{
                    Directive[
                    PointSize[0.5], 
                    AbsoluteThickness[1.6], 
                    EdgeForm[
                    Directive[
                    GrayLevel[0], 
                    Thickness[Small], 
                    Opacity[0.6789999999999999]]], 
                    RGBColor[0.6666666666666667, 0., 0.]], 
                    RectangleBox[{0, 0}, {10, 10}, "RoundingRadius" -> 0]}, 
                    AspectRatio -> Full, ImageSize -> {10, 10}, 
                    PlotRangePadding -> None, ImagePadding -> Automatic, 
                    BaselinePosition -> (Scaled[0.1] -> Baseline)], #2}, {
                   GraphicsBox[{
                    Directive[
                    PointSize[0.5], 
                    AbsoluteThickness[1.6], 
                    EdgeForm[
                    Directive[
                    GrayLevel[0], 
                    Thickness[Small], 
                    Opacity[0.6789999999999999]]], 
                    RGBColor[0.6666666666666667, 0.6666666666666667, 0.]], 
                    RectangleBox[{0, 0}, {10, 10}, "RoundingRadius" -> 0]}, 
                    AspectRatio -> Full, ImageSize -> {10, 10}, 
                    PlotRangePadding -> None, ImagePadding -> Automatic, 
                    BaselinePosition -> (Scaled[0.1] -> Baseline)], #3}}, 
                 GridBoxAlignment -> {
                  "Columns" -> {Center, Left}, "Rows" -> {{Baseline}}}, 
                 AutoDelete -> False, 
                 GridBoxDividers -> {
                  "Columns" -> {{False}}, "Rows" -> {{False}}}, 
                 GridBoxItemSize -> {"Columns" -> {{All}}, "Rows" -> {{All}}},
                  GridBoxSpacings -> {
                  "Columns" -> {{0.5}}, "Rows" -> {{0.5}}}], "Grid"]}}, 
             GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
             AutoDelete -> False, 
             GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {"Columns" -> {{1}}, "Rows" -> {{0}}}], 
            "Grid"], Alignment -> Left, AppearanceElements -> None, 
           ImageMargins -> {{5, 5}, {5, 5}}, ImageSizeAction -> 
           "ResizeToFit"], LineIndent -> 0, StripOnInput -> False], {
          Directive[], 
          Directive[], FontFamily -> "Arial"}, Background -> Automatic, 
         StripOnInput -> False], TraditionalForm]& ), 
      InterpretationFunction :> (RowBox[{"SwatchLegend", "[", 
         RowBox[{
           RowBox[{"{", 
             RowBox[{
               RowBox[{"Directive", "[", 
                 RowBox[{
                   RowBox[{"EdgeForm", "[", 
                    RowBox[{"Directive", "[", 
                    RowBox[{
                    RowBox[{"Thickness", "[", "Small", "]"}], ",", 
                    RowBox[{"Opacity", "[", "0.6789999999999999`", "]"}]}], 
                    "]"}], "]"}], ",", 
                   InterpretationBox[
                    ButtonBox[
                    TooltipBox[
                    GraphicsBox[{{
                    GrayLevel[0], 
                    RectangleBox[{0, 0}]}, {
                    GrayLevel[0], 
                    RectangleBox[{1, -1}]}, {
                    RGBColor[0., 0.4444444444444444, 0.6666666666666667], 
                    RectangleBox[{0, -1}, {2, 1}]}}, AspectRatio -> 1, Frame -> 
                    True, FrameStyle -> 
                    RGBColor[0., 0.2962962962962963, 0.44444444444444453`], 
                    FrameTicks -> None, PlotRangePadding -> None, ImageSize -> 
                    Dynamic[{
                    Automatic, 1.35 CurrentValue["FontCapHeight"]/
                    AbsoluteCurrentValue[Magnification]}]], 
                    "RGBColor[0., 0.4444444444444444, 0.6666666666666667]"], 
                    Appearance -> None, BaseStyle -> {}, BaselinePosition -> 
                    Baseline, DefaultBaseStyle -> {}, ButtonFunction :> 
                    With[{Typeset`box$ = EvaluationBox[]}, 
                    If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    RGBColor[0., 0.4444444444444444, 0.6666666666666667]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["RGBColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]], BaseStyle -> Inherited, Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    RGBColor[0., 0.4444444444444444, 0.6666666666666667], 
                    Editable -> False, Selectable -> False]}], "]"}], ",", 
               RowBox[{"Directive", "[", 
                 RowBox[{
                   RowBox[{"EdgeForm", "[", 
                    RowBox[{"Directive", "[", 
                    RowBox[{
                    RowBox[{"Thickness", "[", "Small", "]"}], ",", 
                    RowBox[{"Opacity", "[", "0.6789999999999999`", "]"}]}], 
                    "]"}], "]"}], ",", 
                   InterpretationBox[
                    ButtonBox[
                    TooltipBox[
                    GraphicsBox[{{
                    GrayLevel[0], 
                    RectangleBox[{0, 0}]}, {
                    GrayLevel[0], 
                    RectangleBox[{1, -1}]}, {
                    RGBColor[0.6666666666666667, 0., 0.], 
                    RectangleBox[{0, -1}, {2, 1}]}}, AspectRatio -> 1, Frame -> 
                    True, FrameStyle -> 
                    RGBColor[0.44444444444444453`, 0., 0.], FrameTicks -> 
                    None, PlotRangePadding -> None, ImageSize -> 
                    Dynamic[{
                    Automatic, 1.35 CurrentValue["FontCapHeight"]/
                    AbsoluteCurrentValue[Magnification]}]], 
                    "RGBColor[0.6666666666666667, 0., 0.]"], Appearance -> 
                    None, BaseStyle -> {}, BaselinePosition -> Baseline, 
                    DefaultBaseStyle -> {}, ButtonFunction :> 
                    With[{Typeset`box$ = EvaluationBox[]}, 
                    If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    RGBColor[0.6666666666666667, 0., 0.]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["RGBColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]], BaseStyle -> Inherited, Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    RGBColor[0.6666666666666667, 0., 0.], Editable -> False, 
                    Selectable -> False]}], "]"}], ",", 
               RowBox[{"Directive", "[", 
                 RowBox[{
                   RowBox[{"EdgeForm", "[", 
                    RowBox[{"Directive", "[", 
                    RowBox[{
                    RowBox[{"Thickness", "[", "Small", "]"}], ",", 
                    RowBox[{"Opacity", "[", "0.6789999999999999`", "]"}]}], 
                    "]"}], "]"}], ",", 
                   InterpretationBox[
                    ButtonBox[
                    TooltipBox[
                    GraphicsBox[{{
                    GrayLevel[0], 
                    RectangleBox[{0, 0}]}, {
                    GrayLevel[0], 
                    RectangleBox[{1, -1}]}, {
                    RGBColor[0.6666666666666667, 0.6666666666666667, 0.], 
                    RectangleBox[{0, -1}, {2, 1}]}}, AspectRatio -> 1, Frame -> 
                    True, FrameStyle -> 
                    RGBColor[0.44444444444444453`, 0.44444444444444453`, 0.], 
                    FrameTicks -> None, PlotRangePadding -> None, ImageSize -> 
                    Dynamic[{
                    Automatic, 1.35 CurrentValue["FontCapHeight"]/
                    AbsoluteCurrentValue[Magnification]}]], 
                    "RGBColor[0.6666666666666667, 0.6666666666666667, 0.]"], 
                    Appearance -> None, BaseStyle -> {}, BaselinePosition -> 
                    Baseline, DefaultBaseStyle -> {}, ButtonFunction :> 
                    With[{Typeset`box$ = EvaluationBox[]}, 
                    If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    RGBColor[0.6666666666666667, 0.6666666666666667, 0.]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["RGBColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]], BaseStyle -> Inherited, Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    RGBColor[0.6666666666666667, 0.6666666666666667, 0.], 
                    Editable -> False, Selectable -> False]}], "]"}]}], "}"}],
            ",", 
           RowBox[{"{", 
             RowBox[{#, ",", #2, ",", #3, ",", #4}], "}"}], ",", 
           RowBox[{"LegendMarkers", "\[Rule]", 
             RowBox[{"{", 
               RowBox[{"{", 
                 RowBox[{"Automatic", ",", "Automatic", ",", "Automatic"}], 
                 "}"}], "}"}]}], ",", 
           RowBox[{"LabelStyle", "\[Rule]", 
             RowBox[{"{", 
               RowBox[{
                 RowBox[{"Directive", "[", "]"}], ",", 
                 RowBox[{"Directive", "[", "]"}]}], "}"}]}], ",", 
           RowBox[{"LegendLayout", "\[Rule]", "\"Column\""}]}], "]"}]& ), 
      Editable -> True], TraditionalForm], TraditionalForm]},
  "Legended",
  DisplayFunction->(GridBox[{{
      TagBox[
       ItemBox[
        PaneBox[
         TagBox[#, "SkipImageSizeLevel"], Alignment -> {Center, Baseline}, 
         BaselinePosition -> Baseline], DefaultBaseStyle -> "Labeled"], 
       "SkipImageSizeLevel"], 
      ItemBox[#2, DefaultBaseStyle -> "LabeledLabel"]}}, 
    GridBoxAlignment -> {"Columns" -> {{Center}}, "Rows" -> {{Center}}}, 
    AutoDelete -> False, GridBoxItemSize -> Automatic, 
    BaselinePosition -> {1, 1}]& ),
  Editable->True,
  InterpretationFunction->(RowBox[{"Legended", "[", 
     RowBox[{#, ",", 
       RowBox[{"Placed", "[", 
         RowBox[{#2, ",", "After"}], "]"}]}], "]"}]& )]], "Output",
 CellChangeTimes->{
  3.6500164027849245`*^9, 3.650016790358*^9, 3.650016860472441*^9, 
   3.6500170648135443`*^9, 3.6500178430964127`*^9, 3.6500183226052322`*^9, 
   3.650018401315884*^9, 3.650018565209202*^9, 3.6500186677396812`*^9, 
   3.6500189383934865`*^9, 3.650019539619196*^9, 3.650019983558324*^9, 
   3.650022738542828*^9, 3.6500257578638835`*^9, 3.6500396248037796`*^9, 
   3.6500398939700356`*^9, 3.650039993846919*^9, 3.650044483047104*^9, 
   3.6500452714722476`*^9, 3.6500499264109244`*^9, 3.650097074255372*^9, 
   3.6500973581328783`*^9, {3.650107354131773*^9, 3.65010735811481*^9}, 
   3.6501074363364735`*^9, 3.650107673680025*^9, 3.6501077926744156`*^9, 
   3.650107890363799*^9, 3.6501080811981897`*^9, 3.6501312378482943`*^9, 
   3.650131363033738*^9, 3.650131726555977*^9, 3.650138276227208*^9, 
   3.6501385284111557`*^9, 3.6501385625454597`*^9, 3.650140794485876*^9, 
   3.6502668310824347`*^9, 3.650276401576001*^9, 3.650371328121809*^9, 
   3.650371653895817*^9, 3.6503718611229467`*^9, 3.6503720385522165`*^9, 
   3.6503721627137003`*^9, 3.6512707685633197`*^9, 3.651273965610647*^9, 
   3.652009950004625*^9, 3.6520100365119658`*^9, 3.6523863309957137`*^9, 
   3.652386408425874*^9, 3.6523947270486937`*^9, 3.652444110292267*^9, 
   3.65246574776667*^9, 3.652466832950224*^9, 3.6524672418232903`*^9, 
   3.652467336058529*^9, 3.652467912529995*^9, 3.652468634130485*^9, 
   3.6524688744380474`*^9, 3.652469130516101*^9, {3.652469285790495*^9, 
   3.652469310025891*^9}, 3.6532353440720835`*^9, 3.6532368561304903`*^9, 
   3.653414274960363*^9, 3.6534144991058645`*^9, 3.6534242505981517`*^9, 
   3.653424320530247*^9, 3.6534244679743*^9, 3.653424632413035*^9, 
   3.6534252362133994`*^9, 3.653426256281699*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "0.178867987137442`", ",", "0.2107540733639437`", ",", 
   "0.27811799274642246`"}], "}"}]], "Output",
 CellChangeTimes->{
  3.6500164027849245`*^9, 3.650016790358*^9, 3.650016860472441*^9, 
   3.6500170648135443`*^9, 3.6500178430964127`*^9, 3.6500183226052322`*^9, 
   3.650018401315884*^9, 3.650018565209202*^9, 3.6500186677396812`*^9, 
   3.6500189383934865`*^9, 3.650019539619196*^9, 3.650019983558324*^9, 
   3.650022738542828*^9, 3.6500257578638835`*^9, 3.6500396248037796`*^9, 
   3.6500398939700356`*^9, 3.650039993846919*^9, 3.650044483047104*^9, 
   3.6500452714722476`*^9, 3.6500499264109244`*^9, 3.650097074255372*^9, 
   3.6500973581328783`*^9, {3.650107354131773*^9, 3.65010735811481*^9}, 
   3.6501074363364735`*^9, 3.650107673680025*^9, 3.6501077926744156`*^9, 
   3.650107890363799*^9, 3.6501080811981897`*^9, 3.6501312378482943`*^9, 
   3.650131363033738*^9, 3.650131726555977*^9, 3.650138276227208*^9, 
   3.6501385284111557`*^9, 3.6501385625454597`*^9, 3.650140794485876*^9, 
   3.6502668310824347`*^9, 3.650276401576001*^9, 3.650371328121809*^9, 
   3.650371653895817*^9, 3.6503718611229467`*^9, 3.6503720385522165`*^9, 
   3.6503721627137003`*^9, 3.6512707685633197`*^9, 3.651273965610647*^9, 
   3.652009950004625*^9, 3.6520100365119658`*^9, 3.6523863309957137`*^9, 
   3.652386408425874*^9, 3.6523947270486937`*^9, 3.652444110292267*^9, 
   3.65246574776667*^9, 3.652466832950224*^9, 3.6524672418232903`*^9, 
   3.652467336058529*^9, 3.652467912529995*^9, 3.652468634130485*^9, 
   3.6524688744380474`*^9, 3.652469130516101*^9, {3.652469285790495*^9, 
   3.652469310025891*^9}, 3.6532353440720835`*^9, 3.6532368561304903`*^9, 
   3.653414274960363*^9, 3.6534144991058645`*^9, 3.6534242505981517`*^9, 
   3.653424320530247*^9, 3.6534244679743*^9, 3.653424632413035*^9, 
   3.6534252362133994`*^9, 3.6534262564067955`*^9}],

Cell[BoxData[
 TemplateBox[{GraphicsBox[{{
      Opacity[0], 
      PointBox[{0.48597994530537825`, 0.}]}, {{}, {
       Directive[
        EdgeForm[
         Directive[
          Thickness[Small], 
          Opacity[0.6789999999999999]]], 
        RGBColor[0.982864, 0.7431472, 0.3262672]], {{
         Directive[
          EdgeForm[
           Directive[
            Thickness[Small], 
            Opacity[0.6789999999999999]]], 
          RGBColor[0., 0.2962962962962963, 0.44444444444444453`]], 
         TagBox[
          TooltipBox[
           TagBox[
            DynamicBox[{
              FEPrivate`If[
               CurrentValue["MouseOver"], 
               EdgeForm[{
                 GrayLevel[0.5], 
                 AbsoluteThickness[1.5], 
                 Opacity[0.66]}], {}, {}], 
              
              RectangleBox[{0.544211485870556, 0.}, {1.455788514129444, 
               0.178867987137442}, "RoundingRadius" -> 0]}], 
            StatusArea[#, 0.178867987137442]& , TagBoxNote -> 
            "0.178867987137442"], 
           StyleBox["0.178867987137442`", {}, StripOnInput -> False]], 
          Annotation[#, 
           Style[0.178867987137442, {}], "Tooltip"]& ]}, {
         Directive[
          EdgeForm[
           Directive[
            Thickness[Small], 
            Opacity[0.6789999999999999]]], 
          RGBColor[0.44444444444444453`, 0., 0.]], 
         TagBox[
          TooltipBox[
           TagBox[
            DynamicBox[{
              FEPrivate`If[
               CurrentValue["MouseOver"], 
               EdgeForm[{
                 GrayLevel[0.5], 
                 AbsoluteThickness[1.5], 
                 Opacity[0.66]}], {}, {}], 
              
              RectangleBox[{1.544211485870556, 0.}, {2.455788514129444, 
               0.2107540733639437}, "RoundingRadius" -> 0]}], 
            StatusArea[#, 0.2107540733639437]& , TagBoxNote -> 
            "0.2107540733639437"], 
           StyleBox["0.2107540733639437`", {}, StripOnInput -> False]], 
          Annotation[#, 
           Style[0.2107540733639437, {}], "Tooltip"]& ]}, {
         Directive[
          EdgeForm[
           Directive[
            Thickness[Small], 
            Opacity[0.6789999999999999]]], 
          RGBColor[0.44444444444444453`, 0.44444444444444453`, 0.]], 
         TagBox[
          TooltipBox[
           TagBox[
            DynamicBox[{
              FEPrivate`If[
               CurrentValue["MouseOver"], 
               EdgeForm[{
                 GrayLevel[0.5], 
                 AbsoluteThickness[1.5], 
                 Opacity[0.66]}], {}, {}], 
              
              RectangleBox[{2.544211485870556, 0.}, {3.455788514129444, 
               0.27811799274642246`}, "RoundingRadius" -> 0]}], 
            StatusArea[#, 0.27811799274642246`]& , TagBoxNote -> 
            "0.27811799274642246"], 
           StyleBox["0.27811799274642246`", {}, StripOnInput -> False]], 
          Annotation[#, 
           Style[0.27811799274642246`, {}], "Tooltip"]& ]}}}, {}, {}}, {}, {
      InsetBox[
       FormBox[
        StyleBox["\"0.178868\"", {
          Directive[], 
          Directive[]}, StripOnInput -> False], TraditionalForm], 
       Offset[{0, 4}, {1., 0.178867987137442}], 
       ImageScaled[{0.5, 0}]], 
      InsetBox[
       FormBox[
        StyleBox["\"0.210754\"", {
          Directive[], 
          Directive[]}, StripOnInput -> False], TraditionalForm], 
       Offset[{0, 4}, {2., 0.2107540733639437}], 
       ImageScaled[{0.5, 0}]], 
      InsetBox[
       FormBox[
        StyleBox["\"0.278118\"", {
          Directive[], 
          Directive[]}, StripOnInput -> False], TraditionalForm], 
       Offset[{0, 4}, {3., 0.27811799274642246`}], 
       ImageScaled[{0.5, 0}]]}, {
      StyleBox[{Antialiasing -> False, {
         Directive[
          Thickness[Tiny]], {
          LineBox[{{0.48597994530537825`, 0.}, {3.5151846855059254`, 0.}}]}, 
         StyleBox[{}, "GraphicsLabel", StripOnInput -> False]}, 
        StyleBox[{{
           Directive[
            Thickness[Tiny]], 
           LineBox[{{0.544211485870556, 0.}, 
             
             Offset[{-1.102182119232618*^-15, -6.}, {0.544211485870556, 
              0.}]}], 
           LineBox[{{3.455788514129444, 0.}, 
             
             Offset[{-1.102182119232618*^-15, -6.}, {3.455788514129444, 
              0.}]}], {{}, {}, {}, {}, {}}}, 
          StyleBox[{}, "GraphicsLabel", StripOnInput -> False]}, 
         "GraphicsTicks", StripOnInput -> False]}, "GraphicsAxes", 
       StripOnInput -> False]}}, {
    AspectRatio -> NCache[GoldenRatio^(-1), 0.6180339887498948], 
     Axes -> {False, True}, AxesLabel -> {None, None}, 
     AxesOrigin -> {0.48597994530537825`, 0.}, 
     CoordinatesToolOptions -> {"DisplayFunction" -> ({
         Identity[
          Part[#, 1]], 
         Identity[
          Part[#, 2]]}& ), "CopiedValueFunction" -> ({
         Identity[
          Part[#, 1]], 
         Identity[
          Part[#, 2]]}& )}, FrameLabel -> {{None, None}, {None, None}}, 
     FrameTicks -> {{Automatic, Automatic}, {{{1., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {2., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {3., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}}, {{1., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {2., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {3., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}}}}, 
     GridLines -> {None, None}, GridLinesStyle -> Directive[
       GrayLevel[0.5, 0.4]], PlotLabel -> 
     FormBox["\"Saliency\"", TraditionalForm], 
     PlotRange -> {{All, All}, {All, All}}, PlotRangePadding -> {{
        Scaled[0.02], 
        Scaled[0.02]}, {
        Scaled[0.02], 
        Scaled[0.05]}}, Ticks -> {None, Automatic}}],FormBox[
    FormBox[
     TemplateBox[{
      "\"Feature 1\"", "\"Feature 2\"", "\"Feature 3\"", "\"Feature 4\""}, 
      "SwatchLegend", DisplayFunction -> (FormBox[
        StyleBox[
         StyleBox[
          PaneBox[
           TagBox[
            GridBox[{{
               TagBox[
                GridBox[{{
                   GraphicsBox[{
                    Directive[
                    PointSize[0.5], 
                    AbsoluteThickness[1.6], 
                    EdgeForm[
                    Directive[
                    GrayLevel[0], 
                    Thickness[Small], 
                    Opacity[0.6789999999999999]]], 
                    RGBColor[0., 0.2962962962962963, 0.44444444444444453`]], 
                    RectangleBox[{0, 0}, {10, 10}, "RoundingRadius" -> 0]}, 
                    AspectRatio -> Full, ImageSize -> {10, 10}, 
                    PlotRangePadding -> None, ImagePadding -> Automatic, 
                    BaselinePosition -> (Scaled[0.1] -> Baseline)], #}, {
                   GraphicsBox[{
                    Directive[
                    PointSize[0.5], 
                    AbsoluteThickness[1.6], 
                    EdgeForm[
                    Directive[
                    GrayLevel[0], 
                    Thickness[Small], 
                    Opacity[0.6789999999999999]]], 
                    RGBColor[0.44444444444444453`, 0., 0.]], 
                    RectangleBox[{0, 0}, {10, 10}, "RoundingRadius" -> 0]}, 
                    AspectRatio -> Full, ImageSize -> {10, 10}, 
                    PlotRangePadding -> None, ImagePadding -> Automatic, 
                    BaselinePosition -> (Scaled[0.1] -> Baseline)], #2}, {
                   GraphicsBox[{
                    Directive[
                    PointSize[0.5], 
                    AbsoluteThickness[1.6], 
                    EdgeForm[
                    Directive[
                    GrayLevel[0], 
                    Thickness[Small], 
                    Opacity[0.6789999999999999]]], 
                    RGBColor[0.44444444444444453`, 0.44444444444444453`, 0.]], 
                    RectangleBox[{0, 0}, {10, 10}, "RoundingRadius" -> 0]}, 
                    AspectRatio -> Full, ImageSize -> {10, 10}, 
                    PlotRangePadding -> None, ImagePadding -> Automatic, 
                    BaselinePosition -> (Scaled[0.1] -> Baseline)], #3}}, 
                 GridBoxAlignment -> {
                  "Columns" -> {Center, Left}, "Rows" -> {{Baseline}}}, 
                 AutoDelete -> False, 
                 GridBoxDividers -> {
                  "Columns" -> {{False}}, "Rows" -> {{False}}}, 
                 GridBoxItemSize -> {"Columns" -> {{All}}, "Rows" -> {{All}}},
                  GridBoxSpacings -> {
                  "Columns" -> {{0.5}}, "Rows" -> {{0.5}}}], "Grid"]}}, 
             GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
             AutoDelete -> False, 
             GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {"Columns" -> {{1}}, "Rows" -> {{0}}}], 
            "Grid"], Alignment -> Left, AppearanceElements -> None, 
           ImageMargins -> {{5, 5}, {5, 5}}, ImageSizeAction -> 
           "ResizeToFit"], LineIndent -> 0, StripOnInput -> False], {
          Directive[], 
          Directive[], FontFamily -> "Arial"}, Background -> Automatic, 
         StripOnInput -> False], TraditionalForm]& ), 
      InterpretationFunction :> (RowBox[{"SwatchLegend", "[", 
         RowBox[{
           RowBox[{"{", 
             RowBox[{
               RowBox[{"Directive", "[", 
                 RowBox[{
                   RowBox[{"EdgeForm", "[", 
                    RowBox[{"Directive", "[", 
                    RowBox[{
                    RowBox[{"Thickness", "[", "Small", "]"}], ",", 
                    RowBox[{"Opacity", "[", "0.6789999999999999`", "]"}]}], 
                    "]"}], "]"}], ",", 
                   InterpretationBox[
                    ButtonBox[
                    TooltipBox[
                    GraphicsBox[{{
                    GrayLevel[0], 
                    RectangleBox[{0, 0}]}, {
                    GrayLevel[0], 
                    RectangleBox[{1, -1}]}, {
                    RGBColor[0., 0.2962962962962963, 0.44444444444444453`], 
                    RectangleBox[{0, -1}, {2, 1}]}}, AspectRatio -> 1, Frame -> 
                    True, FrameStyle -> 
                    RGBColor[0., 0.19753086419753085`, 0.2962962962962964], 
                    FrameTicks -> None, PlotRangePadding -> None, ImageSize -> 
                    Dynamic[{
                    Automatic, 1.35 CurrentValue["FontCapHeight"]/
                    AbsoluteCurrentValue[Magnification]}]], 
                    "RGBColor[0., 0.2962962962962963, 0.44444444444444453]"], 
                    Appearance -> None, BaseStyle -> {}, BaselinePosition -> 
                    Baseline, DefaultBaseStyle -> {}, ButtonFunction :> 
                    With[{Typeset`box$ = EvaluationBox[]}, 
                    If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    RGBColor[0., 0.2962962962962963, 0.44444444444444453`]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["RGBColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]], BaseStyle -> Inherited, Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    RGBColor[0., 0.2962962962962963, 0.44444444444444453`], 
                    Editable -> False, Selectable -> False]}], "]"}], ",", 
               RowBox[{"Directive", "[", 
                 RowBox[{
                   RowBox[{"EdgeForm", "[", 
                    RowBox[{"Directive", "[", 
                    RowBox[{
                    RowBox[{"Thickness", "[", "Small", "]"}], ",", 
                    RowBox[{"Opacity", "[", "0.6789999999999999`", "]"}]}], 
                    "]"}], "]"}], ",", 
                   InterpretationBox[
                    ButtonBox[
                    TooltipBox[
                    GraphicsBox[{{
                    GrayLevel[0], 
                    RectangleBox[{0, 0}]}, {
                    GrayLevel[0], 
                    RectangleBox[{1, -1}]}, {
                    RGBColor[0.44444444444444453`, 0., 0.], 
                    RectangleBox[{0, -1}, {2, 1}]}}, AspectRatio -> 1, Frame -> 
                    True, FrameStyle -> RGBColor[0.2962962962962964, 0., 0.], 
                    FrameTicks -> None, PlotRangePadding -> None, ImageSize -> 
                    Dynamic[{
                    Automatic, 1.35 CurrentValue["FontCapHeight"]/
                    AbsoluteCurrentValue[Magnification]}]], 
                    "RGBColor[0.44444444444444453, 0., 0.]"], Appearance -> 
                    None, BaseStyle -> {}, BaselinePosition -> Baseline, 
                    DefaultBaseStyle -> {}, ButtonFunction :> 
                    With[{Typeset`box$ = EvaluationBox[]}, 
                    If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    RGBColor[0.44444444444444453`, 0., 0.]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["RGBColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]], BaseStyle -> Inherited, Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    RGBColor[0.44444444444444453`, 0., 0.], Editable -> False,
                     Selectable -> False]}], "]"}], ",", 
               RowBox[{"Directive", "[", 
                 RowBox[{
                   RowBox[{"EdgeForm", "[", 
                    RowBox[{"Directive", "[", 
                    RowBox[{
                    RowBox[{"Thickness", "[", "Small", "]"}], ",", 
                    RowBox[{"Opacity", "[", "0.6789999999999999`", "]"}]}], 
                    "]"}], "]"}], ",", 
                   InterpretationBox[
                    ButtonBox[
                    TooltipBox[
                    GraphicsBox[{{
                    GrayLevel[0], 
                    RectangleBox[{0, 0}]}, {
                    GrayLevel[0], 
                    RectangleBox[{1, -1}]}, {
                    RGBColor[0.44444444444444453`, 0.44444444444444453`, 0.], 
                    RectangleBox[{0, -1}, {2, 1}]}}, AspectRatio -> 1, Frame -> 
                    True, FrameStyle -> 
                    RGBColor[0.2962962962962964, 0.2962962962962964, 0.], 
                    FrameTicks -> None, PlotRangePadding -> None, ImageSize -> 
                    Dynamic[{
                    Automatic, 1.35 CurrentValue["FontCapHeight"]/
                    AbsoluteCurrentValue[Magnification]}]], 
                    "RGBColor[0.44444444444444453, 0.44444444444444453, 0.]"],
                     Appearance -> None, BaseStyle -> {}, BaselinePosition -> 
                    Baseline, DefaultBaseStyle -> {}, ButtonFunction :> 
                    With[{Typeset`box$ = EvaluationBox[]}, 
                    If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    RGBColor[0.44444444444444453`, 0.44444444444444453`, 0.]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["RGBColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]], BaseStyle -> Inherited, Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    RGBColor[0.44444444444444453`, 0.44444444444444453`, 0.], 
                    Editable -> False, Selectable -> False]}], "]"}]}], "}"}],
            ",", 
           RowBox[{"{", 
             RowBox[{#, ",", #2, ",", #3, ",", #4}], "}"}], ",", 
           RowBox[{"LegendMarkers", "\[Rule]", 
             RowBox[{"{", 
               RowBox[{"{", 
                 RowBox[{"Automatic", ",", "Automatic", ",", "Automatic"}], 
                 "}"}], "}"}]}], ",", 
           RowBox[{"LabelStyle", "\[Rule]", 
             RowBox[{"{", 
               RowBox[{
                 RowBox[{"Directive", "[", "]"}], ",", 
                 RowBox[{"Directive", "[", "]"}]}], "}"}]}], ",", 
           RowBox[{"LegendLayout", "\[Rule]", "\"Column\""}]}], "]"}]& ), 
      Editable -> True], TraditionalForm], TraditionalForm]},
  "Legended",
  DisplayFunction->(GridBox[{{
      TagBox[
       ItemBox[
        PaneBox[
         TagBox[#, "SkipImageSizeLevel"], Alignment -> {Center, Baseline}, 
         BaselinePosition -> Baseline], DefaultBaseStyle -> "Labeled"], 
       "SkipImageSizeLevel"], 
      ItemBox[#2, DefaultBaseStyle -> "LabeledLabel"]}}, 
    GridBoxAlignment -> {"Columns" -> {{Center}}, "Rows" -> {{Center}}}, 
    AutoDelete -> False, GridBoxItemSize -> Automatic, 
    BaselinePosition -> {1, 1}]& ),
  Editable->True,
  InterpretationFunction->(RowBox[{"Legended", "[", 
     RowBox[{#, ",", 
       RowBox[{"Placed", "[", 
         RowBox[{#2, ",", "After"}], "]"}]}], "]"}]& )]], "Output",
 CellChangeTimes->{
  3.6500164027849245`*^9, 3.650016790358*^9, 3.650016860472441*^9, 
   3.6500170648135443`*^9, 3.6500178430964127`*^9, 3.6500183226052322`*^9, 
   3.650018401315884*^9, 3.650018565209202*^9, 3.6500186677396812`*^9, 
   3.6500189383934865`*^9, 3.650019539619196*^9, 3.650019983558324*^9, 
   3.650022738542828*^9, 3.6500257578638835`*^9, 3.6500396248037796`*^9, 
   3.6500398939700356`*^9, 3.650039993846919*^9, 3.650044483047104*^9, 
   3.6500452714722476`*^9, 3.6500499264109244`*^9, 3.650097074255372*^9, 
   3.6500973581328783`*^9, {3.650107354131773*^9, 3.65010735811481*^9}, 
   3.6501074363364735`*^9, 3.650107673680025*^9, 3.6501077926744156`*^9, 
   3.650107890363799*^9, 3.6501080811981897`*^9, 3.6501312378482943`*^9, 
   3.650131363033738*^9, 3.650131726555977*^9, 3.650138276227208*^9, 
   3.6501385284111557`*^9, 3.6501385625454597`*^9, 3.650140794485876*^9, 
   3.6502668310824347`*^9, 3.650276401576001*^9, 3.650371328121809*^9, 
   3.650371653895817*^9, 3.6503718611229467`*^9, 3.6503720385522165`*^9, 
   3.6503721627137003`*^9, 3.6512707685633197`*^9, 3.651273965610647*^9, 
   3.652009950004625*^9, 3.6520100365119658`*^9, 3.6523863309957137`*^9, 
   3.652386408425874*^9, 3.6523947270486937`*^9, 3.652444110292267*^9, 
   3.65246574776667*^9, 3.652466832950224*^9, 3.6524672418232903`*^9, 
   3.652467336058529*^9, 3.652467912529995*^9, 3.652468634130485*^9, 
   3.6524688744380474`*^9, 3.652469130516101*^9, {3.652469285790495*^9, 
   3.652469310025891*^9}, 3.6532353440720835`*^9, 3.6532368561304903`*^9, 
   3.653414274960363*^9, 3.6534144991058645`*^9, 3.6534242505981517`*^9, 
   3.653424320530247*^9, 3.6534244679743*^9, 3.653424632413035*^9, 
   3.6534252362133994`*^9, 3.6534262564849195`*^9}],

Cell[BoxData[
 TemplateBox[{GraphicsBox[{{
      Opacity[0], 
      PointBox[{0.48597994530537825`, 0.}]}, {{}, {
       Directive[
        EdgeForm[
         Directive[
          Thickness[Small], 
          Opacity[0.6789999999999999]]], 
        RGBColor[0.982864, 0.7431472, 0.3262672]], {{
         Directive[
          EdgeForm[
           Directive[
            Thickness[Small], 
            Opacity[0.6789999999999999]]], 
          RGBColor[0.3333333333333333, 0.7777777777777778, 1.]], 
         TagBox[
          TooltipBox[
           TagBox[
            DynamicBox[{
              FEPrivate`If[
               CurrentValue["MouseOver"], 
               EdgeForm[{
                 GrayLevel[0.5], 
                 AbsoluteThickness[1.5], 
                 Opacity[0.66]}], {}, {}], 
              
              RectangleBox[{0.544211485870556, 0.}, {1.455788514129444, 
               0.3398688955399717}, "RoundingRadius" -> 0]}], 
            StatusArea[#, 0.3398688955399717]& , TagBoxNote -> 
            "0.3398688955399717"], 
           StyleBox["0.3398688955399717`", {}, StripOnInput -> False]], 
          Annotation[#, 
           Style[0.3398688955399717, {}], "Tooltip"]& ]}, {
         Directive[
          EdgeForm[
           Directive[
            Thickness[Small], 
            Opacity[0.6789999999999999]]], 
          RGBColor[1., 0.3333333333333333, 0.3333333333333333]], 
         TagBox[
          TooltipBox[
           TagBox[
            DynamicBox[{
              FEPrivate`If[
               CurrentValue["MouseOver"], 
               EdgeForm[{
                 GrayLevel[0.5], 
                 AbsoluteThickness[1.5], 
                 Opacity[0.66]}], {}, {}], 
              
              RectangleBox[{1.544211485870556, 0.}, {2.455788514129444, 
               0.2880849404677378}, "RoundingRadius" -> 0]}], 
            StatusArea[#, 0.2880849404677378]& , TagBoxNote -> 
            "0.2880849404677378"], 
           StyleBox["0.2880849404677378`", {}, StripOnInput -> False]], 
          Annotation[#, 
           Style[0.2880849404677378, {}], "Tooltip"]& ]}, {
         Directive[
          EdgeForm[
           Directive[
            Thickness[Small], 
            Opacity[0.6789999999999999]]], 
          RGBColor[1., 1., 0.3333333333333333]], 
         TagBox[
          TooltipBox[
           TagBox[
            DynamicBox[{
              FEPrivate`If[
               CurrentValue["MouseOver"], 
               EdgeForm[{
                 GrayLevel[0.5], 
                 AbsoluteThickness[1.5], 
                 Opacity[0.66]}], {}, {}], 
              
              RectangleBox[{2.544211485870556, 0.}, {3.455788514129444, 
               0.37204616399190316`}, "RoundingRadius" -> 0]}], 
            StatusArea[#, 0.37204616399190316`]& , TagBoxNote -> 
            "0.37204616399190316"], 
           StyleBox["0.37204616399190316`", {}, StripOnInput -> False]], 
          Annotation[#, 
           Style[0.37204616399190316`, {}], "Tooltip"]& ]}}}, {}, {}}, {}, {
      InsetBox[
       FormBox[
        StyleBox["\"0.339869\"", {
          Directive[], 
          Directive[]}, StripOnInput -> False], TraditionalForm], 
       Offset[{0, 4}, {1., 0.3398688955399717}], 
       ImageScaled[{0.5, 0}]], 
      InsetBox[
       FormBox[
        StyleBox["\"0.288085\"", {
          Directive[], 
          Directive[]}, StripOnInput -> False], TraditionalForm], 
       Offset[{0, 4}, {2., 0.2880849404677378}], 
       ImageScaled[{0.5, 0}]], 
      InsetBox[
       FormBox[
        StyleBox["\"0.372046\"", {
          Directive[], 
          Directive[]}, StripOnInput -> False], TraditionalForm], 
       Offset[{0, 4}, {3., 0.37204616399190316`}], 
       ImageScaled[{0.5, 0}]]}, {
      StyleBox[{Antialiasing -> False, {
         Directive[
          Thickness[Tiny]], {
          LineBox[{{0.48597994530537825`, 0.}, {3.5151846855059254`, 0.}}]}, 
         StyleBox[{}, "GraphicsLabel", StripOnInput -> False]}, 
        StyleBox[{{
           Directive[
            Thickness[Tiny]], 
           LineBox[{{0.544211485870556, 0.}, 
             
             Offset[{-1.102182119232618*^-15, -6.}, {0.544211485870556, 
              0.}]}], 
           LineBox[{{3.455788514129444, 0.}, 
             
             Offset[{-1.102182119232618*^-15, -6.}, {3.455788514129444, 
              0.}]}], {{}, {}, {}, {}, {}}}, 
          StyleBox[{}, "GraphicsLabel", StripOnInput -> False]}, 
         "GraphicsTicks", StripOnInput -> False]}, "GraphicsAxes", 
       StripOnInput -> False]}}, {
    AspectRatio -> NCache[GoldenRatio^(-1), 0.6180339887498948], 
     Axes -> {False, True}, AxesLabel -> {None, None}, 
     AxesOrigin -> {0.48597994530537825`, 0.}, 
     CoordinatesToolOptions -> {"DisplayFunction" -> ({
         Identity[
          Part[#, 1]], 
         Identity[
          Part[#, 2]]}& ), "CopiedValueFunction" -> ({
         Identity[
          Part[#, 1]], 
         Identity[
          Part[#, 2]]}& )}, FrameLabel -> {{None, None}, {None, None}}, 
     FrameTicks -> {{Automatic, Automatic}, {{{1., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {2., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {3., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}}, {{1., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {2., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {3., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}}}}, 
     GridLines -> {None, None}, GridLinesStyle -> Directive[
       GrayLevel[0.5, 0.4]], PlotLabel -> 
     FormBox["\"Visibility-weighted saliency of brightness\"", 
       TraditionalForm], PlotRange -> {{All, All}, {All, All}}, 
     PlotRangePadding -> {{
        Scaled[0.02], 
        Scaled[0.02]}, {
        Scaled[0.02], 
        Scaled[0.05]}}, Ticks -> {None, Automatic}}],FormBox[
    FormBox[
     TemplateBox[{
      "\"Feature 1\"", "\"Feature 2\"", "\"Feature 3\"", "\"Feature 4\""}, 
      "SwatchLegend", DisplayFunction -> (FormBox[
        StyleBox[
         StyleBox[
          PaneBox[
           TagBox[
            GridBox[{{
               TagBox[
                GridBox[{{
                   GraphicsBox[{
                    Directive[
                    PointSize[0.5], 
                    AbsoluteThickness[1.6], 
                    EdgeForm[
                    Directive[
                    GrayLevel[0], 
                    Thickness[Small], 
                    Opacity[0.6789999999999999]]], 
                    RGBColor[0.3333333333333333, 0.7777777777777778, 1.]], 
                    RectangleBox[{0, 0}, {10, 10}, "RoundingRadius" -> 0]}, 
                    AspectRatio -> Full, ImageSize -> {10, 10}, 
                    PlotRangePadding -> None, ImagePadding -> Automatic, 
                    BaselinePosition -> (Scaled[0.1] -> Baseline)], #}, {
                   GraphicsBox[{
                    Directive[
                    PointSize[0.5], 
                    AbsoluteThickness[1.6], 
                    EdgeForm[
                    Directive[
                    GrayLevel[0], 
                    Thickness[Small], 
                    Opacity[0.6789999999999999]]], 
                    RGBColor[1., 0.3333333333333333, 0.3333333333333333]], 
                    RectangleBox[{0, 0}, {10, 10}, "RoundingRadius" -> 0]}, 
                    AspectRatio -> Full, ImageSize -> {10, 10}, 
                    PlotRangePadding -> None, ImagePadding -> Automatic, 
                    BaselinePosition -> (Scaled[0.1] -> Baseline)], #2}, {
                   GraphicsBox[{
                    Directive[
                    PointSize[0.5], 
                    AbsoluteThickness[1.6], 
                    EdgeForm[
                    Directive[
                    GrayLevel[0], 
                    Thickness[Small], 
                    Opacity[0.6789999999999999]]], 
                    RGBColor[1., 1., 0.3333333333333333]], 
                    RectangleBox[{0, 0}, {10, 10}, "RoundingRadius" -> 0]}, 
                    AspectRatio -> Full, ImageSize -> {10, 10}, 
                    PlotRangePadding -> None, ImagePadding -> Automatic, 
                    BaselinePosition -> (Scaled[0.1] -> Baseline)], #3}}, 
                 GridBoxAlignment -> {
                  "Columns" -> {Center, Left}, "Rows" -> {{Baseline}}}, 
                 AutoDelete -> False, 
                 GridBoxDividers -> {
                  "Columns" -> {{False}}, "Rows" -> {{False}}}, 
                 GridBoxItemSize -> {"Columns" -> {{All}}, "Rows" -> {{All}}},
                  GridBoxSpacings -> {
                  "Columns" -> {{0.5}}, "Rows" -> {{0.5}}}], "Grid"]}}, 
             GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
             AutoDelete -> False, 
             GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {"Columns" -> {{1}}, "Rows" -> {{0}}}], 
            "Grid"], Alignment -> Left, AppearanceElements -> None, 
           ImageMargins -> {{5, 5}, {5, 5}}, ImageSizeAction -> 
           "ResizeToFit"], LineIndent -> 0, StripOnInput -> False], {
          Directive[], 
          Directive[], FontFamily -> "Arial"}, Background -> Automatic, 
         StripOnInput -> False], TraditionalForm]& ), 
      InterpretationFunction :> (RowBox[{"SwatchLegend", "[", 
         RowBox[{
           RowBox[{"{", 
             RowBox[{
               RowBox[{"Directive", "[", 
                 RowBox[{
                   RowBox[{"EdgeForm", "[", 
                    RowBox[{"Directive", "[", 
                    RowBox[{
                    RowBox[{"Thickness", "[", "Small", "]"}], ",", 
                    RowBox[{"Opacity", "[", "0.6789999999999999`", "]"}]}], 
                    "]"}], "]"}], ",", 
                   InterpretationBox[
                    ButtonBox[
                    TooltipBox[
                    GraphicsBox[{{
                    GrayLevel[0], 
                    RectangleBox[{0, 0}]}, {
                    GrayLevel[0], 
                    RectangleBox[{1, -1}]}, {
                    RGBColor[0.3333333333333333, 0.7777777777777778, 1.], 
                    RectangleBox[{0, -1}, {2, 1}]}}, AspectRatio -> 1, Frame -> 
                    True, FrameStyle -> 
                    RGBColor[
                    0.2222222222222222, 0.5185185185185186, 
                    0.6666666666666667], FrameTicks -> None, PlotRangePadding -> 
                    None, ImageSize -> 
                    Dynamic[{
                    Automatic, 1.35 CurrentValue["FontCapHeight"]/
                    AbsoluteCurrentValue[Magnification]}]], 
                    "RGBColor[0.3333333333333333, 0.7777777777777778, 1.]"], 
                    Appearance -> None, BaseStyle -> {}, BaselinePosition -> 
                    Baseline, DefaultBaseStyle -> {}, ButtonFunction :> 
                    With[{Typeset`box$ = EvaluationBox[]}, 
                    If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    RGBColor[0.3333333333333333, 0.7777777777777778, 1.]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["RGBColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]], BaseStyle -> Inherited, Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    RGBColor[0.3333333333333333, 0.7777777777777778, 1.], 
                    Editable -> False, Selectable -> False]}], "]"}], ",", 
               RowBox[{"Directive", "[", 
                 RowBox[{
                   RowBox[{"EdgeForm", "[", 
                    RowBox[{"Directive", "[", 
                    RowBox[{
                    RowBox[{"Thickness", "[", "Small", "]"}], ",", 
                    RowBox[{"Opacity", "[", "0.6789999999999999`", "]"}]}], 
                    "]"}], "]"}], ",", 
                   InterpretationBox[
                    ButtonBox[
                    TooltipBox[
                    GraphicsBox[{{
                    GrayLevel[0], 
                    RectangleBox[{0, 0}]}, {
                    GrayLevel[0], 
                    RectangleBox[{1, -1}]}, {
                    RGBColor[1., 0.3333333333333333, 0.3333333333333333], 
                    RectangleBox[{0, -1}, {2, 1}]}}, AspectRatio -> 1, Frame -> 
                    True, FrameStyle -> 
                    RGBColor[
                    0.6666666666666667, 0.2222222222222222, 
                    0.2222222222222222], FrameTicks -> None, PlotRangePadding -> 
                    None, ImageSize -> 
                    Dynamic[{
                    Automatic, 1.35 CurrentValue["FontCapHeight"]/
                    AbsoluteCurrentValue[Magnification]}]], 
                    "RGBColor[1., 0.3333333333333333, 0.3333333333333333]"], 
                    Appearance -> None, BaseStyle -> {}, BaselinePosition -> 
                    Baseline, DefaultBaseStyle -> {}, ButtonFunction :> 
                    With[{Typeset`box$ = EvaluationBox[]}, 
                    If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    RGBColor[1., 0.3333333333333333, 0.3333333333333333]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["RGBColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]], BaseStyle -> Inherited, Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    RGBColor[1., 0.3333333333333333, 0.3333333333333333], 
                    Editable -> False, Selectable -> False]}], "]"}], ",", 
               RowBox[{"Directive", "[", 
                 RowBox[{
                   RowBox[{"EdgeForm", "[", 
                    RowBox[{"Directive", "[", 
                    RowBox[{
                    RowBox[{"Thickness", "[", "Small", "]"}], ",", 
                    RowBox[{"Opacity", "[", "0.6789999999999999`", "]"}]}], 
                    "]"}], "]"}], ",", 
                   InterpretationBox[
                    ButtonBox[
                    TooltipBox[
                    GraphicsBox[{{
                    GrayLevel[0], 
                    RectangleBox[{0, 0}]}, {
                    GrayLevel[0], 
                    RectangleBox[{1, -1}]}, {
                    RGBColor[1., 1., 0.3333333333333333], 
                    RectangleBox[{0, -1}, {2, 1}]}}, AspectRatio -> 1, Frame -> 
                    True, FrameStyle -> 
                    RGBColor[
                    0.6666666666666667, 0.6666666666666667, 
                    0.2222222222222222], FrameTicks -> None, PlotRangePadding -> 
                    None, ImageSize -> 
                    Dynamic[{
                    Automatic, 1.35 CurrentValue["FontCapHeight"]/
                    AbsoluteCurrentValue[Magnification]}]], 
                    "RGBColor[1., 1., 0.3333333333333333]"], Appearance -> 
                    None, BaseStyle -> {}, BaselinePosition -> Baseline, 
                    DefaultBaseStyle -> {}, ButtonFunction :> 
                    With[{Typeset`box$ = EvaluationBox[]}, 
                    If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    RGBColor[1., 1., 0.3333333333333333]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["RGBColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]], BaseStyle -> Inherited, Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    RGBColor[1., 1., 0.3333333333333333], Editable -> False, 
                    Selectable -> False]}], "]"}]}], "}"}], ",", 
           RowBox[{"{", 
             RowBox[{#, ",", #2, ",", #3, ",", #4}], "}"}], ",", 
           RowBox[{"LegendMarkers", "\[Rule]", 
             RowBox[{"{", 
               RowBox[{"{", 
                 RowBox[{"Automatic", ",", "Automatic", ",", "Automatic"}], 
                 "}"}], "}"}]}], ",", 
           RowBox[{"LabelStyle", "\[Rule]", 
             RowBox[{"{", 
               RowBox[{
                 RowBox[{"Directive", "[", "]"}], ",", 
                 RowBox[{"Directive", "[", "]"}]}], "}"}]}], ",", 
           RowBox[{"LegendLayout", "\[Rule]", "\"Column\""}]}], "]"}]& ), 
      Editable -> True], TraditionalForm], TraditionalForm]},
  "Legended",
  DisplayFunction->(GridBox[{{
      TagBox[
       ItemBox[
        PaneBox[
         TagBox[#, "SkipImageSizeLevel"], Alignment -> {Center, Baseline}, 
         BaselinePosition -> Baseline], DefaultBaseStyle -> "Labeled"], 
       "SkipImageSizeLevel"], 
      ItemBox[#2, DefaultBaseStyle -> "LabeledLabel"]}}, 
    GridBoxAlignment -> {"Columns" -> {{Center}}, "Rows" -> {{Center}}}, 
    AutoDelete -> False, GridBoxItemSize -> Automatic, 
    BaselinePosition -> {1, 1}]& ),
  Editable->True,
  InterpretationFunction->(RowBox[{"Legended", "[", 
     RowBox[{#, ",", 
       RowBox[{"Placed", "[", 
         RowBox[{#2, ",", "After"}], "]"}]}], "]"}]& )]], "Output",
 CellChangeTimes->{
  3.6500164027849245`*^9, 3.650016790358*^9, 3.650016860472441*^9, 
   3.6500170648135443`*^9, 3.6500178430964127`*^9, 3.6500183226052322`*^9, 
   3.650018401315884*^9, 3.650018565209202*^9, 3.6500186677396812`*^9, 
   3.6500189383934865`*^9, 3.650019539619196*^9, 3.650019983558324*^9, 
   3.650022738542828*^9, 3.6500257578638835`*^9, 3.6500396248037796`*^9, 
   3.6500398939700356`*^9, 3.650039993846919*^9, 3.650044483047104*^9, 
   3.6500452714722476`*^9, 3.6500499264109244`*^9, 3.650097074255372*^9, 
   3.6500973581328783`*^9, {3.650107354131773*^9, 3.65010735811481*^9}, 
   3.6501074363364735`*^9, 3.650107673680025*^9, 3.6501077926744156`*^9, 
   3.650107890363799*^9, 3.6501080811981897`*^9, 3.6501312378482943`*^9, 
   3.650131363033738*^9, 3.650131726555977*^9, 3.650138276227208*^9, 
   3.6501385284111557`*^9, 3.6501385625454597`*^9, 3.650140794485876*^9, 
   3.6502668310824347`*^9, 3.650276401576001*^9, 3.650371328121809*^9, 
   3.650371653895817*^9, 3.6503718611229467`*^9, 3.6503720385522165`*^9, 
   3.6503721627137003`*^9, 3.6512707685633197`*^9, 3.651273965610647*^9, 
   3.652009950004625*^9, 3.6520100365119658`*^9, 3.6523863309957137`*^9, 
   3.652386408425874*^9, 3.6523947270486937`*^9, 3.652444110292267*^9, 
   3.65246574776667*^9, 3.652466832950224*^9, 3.6524672418232903`*^9, 
   3.652467336058529*^9, 3.652467912529995*^9, 3.652468634130485*^9, 
   3.6524688744380474`*^9, 3.652469130516101*^9, {3.652469285790495*^9, 
   3.652469310025891*^9}, 3.6532353440720835`*^9, 3.6532368561304903`*^9, 
   3.653414274960363*^9, 3.6534144991058645`*^9, 3.6534242505981517`*^9, 
   3.653424320530247*^9, 3.6534244679743*^9, 3.653424632413035*^9, 
   3.6534252362133994`*^9, 3.653426256660067*^9}],

Cell[BoxData[
 TemplateBox[{GraphicsBox[{{
      Opacity[0], 
      PointBox[{0.48597994530537825`, 0.}]}, {{}, {
       Directive[
        EdgeForm[
         Directive[
          Thickness[Small], 
          Opacity[0.6789999999999999]]], 
        RGBColor[0.982864, 0.7431472, 0.3262672]], {{
         Directive[
          EdgeForm[
           Directive[
            Thickness[Small], 
            Opacity[0.6789999999999999]]], 
          RGBColor[0.3333333333333333, 0.7777777777777778, 1.]], 
         TagBox[
          TooltipBox[
           TagBox[
            DynamicBox[{
              FEPrivate`If[
               CurrentValue["MouseOver"], 
               EdgeForm[{
                 GrayLevel[0.5], 
                 AbsoluteThickness[1.5], 
                 Opacity[0.66]}], {}, {}], 
              
              RectangleBox[{0.544211485870556, 0.}, {1.455788514129444, 
               0.425223659692622}, "RoundingRadius" -> 0]}], 
            StatusArea[#, 0.425223659692622]& , TagBoxNote -> 
            "0.425223659692622"], 
           StyleBox["0.425223659692622`", {}, StripOnInput -> False]], 
          Annotation[#, 
           Style[0.425223659692622, {}], "Tooltip"]& ]}, {
         Directive[
          EdgeForm[
           Directive[
            Thickness[Small], 
            Opacity[0.6789999999999999]]], 
          RGBColor[1., 0.3333333333333333, 0.3333333333333333]], 
         TagBox[
          TooltipBox[
           TagBox[
            DynamicBox[{
              FEPrivate`If[
               CurrentValue["MouseOver"], 
               EdgeForm[{
                 GrayLevel[0.5], 
                 AbsoluteThickness[1.5], 
                 Opacity[0.66]}], {}, {}], 
              
              RectangleBox[{1.544211485870556, 0.}, {2.455788514129444, 
               0.5160972274209921}, "RoundingRadius" -> 0]}], 
            StatusArea[#, 0.5160972274209921]& , TagBoxNote -> 
            "0.5160972274209921"], 
           StyleBox["0.5160972274209921`", {}, StripOnInput -> False]], 
          Annotation[#, 
           Style[0.5160972274209921, {}], "Tooltip"]& ]}, {
         Directive[
          EdgeForm[
           Directive[
            Thickness[Small], 
            Opacity[0.6789999999999999]]], 
          RGBColor[1., 1., 0.3333333333333333]], 
         TagBox[
          TooltipBox[
           TagBox[
            DynamicBox[{
              FEPrivate`If[
               CurrentValue["MouseOver"], 
               EdgeForm[{
                 GrayLevel[0.5], 
                 AbsoluteThickness[1.5], 
                 Opacity[0.66]}], {}, {}], 
              
              RectangleBox[{2.544211485870556, 0.}, {3.455788514129444, 
               0.05867911288612854}, "RoundingRadius" -> 0]}], 
            StatusArea[#, 0.05867911288612854]& , TagBoxNote -> 
            "0.05867911288612854"], 
           StyleBox["0.05867911288612854`", {}, StripOnInput -> False]], 
          Annotation[#, 
           Style[0.05867911288612854, {}], "Tooltip"]& ]}}}, {}, {}}, {}, {
      InsetBox[
       FormBox[
        StyleBox["\"0.425224\"", {
          Directive[], 
          Directive[]}, StripOnInput -> False], TraditionalForm], 
       Offset[{0, 4}, {1., 0.425223659692622}], 
       ImageScaled[{0.5, 0}]], 
      InsetBox[
       FormBox[
        StyleBox["\"0.516097\"", {
          Directive[], 
          Directive[]}, StripOnInput -> False], TraditionalForm], 
       Offset[{0, 4}, {2., 0.5160972274209921}], 
       ImageScaled[{0.5, 0}]], 
      InsetBox[
       FormBox[
        StyleBox["\"0.0586791\"", {
          Directive[], 
          Directive[]}, StripOnInput -> False], TraditionalForm], 
       Offset[{0, 4}, {3., 0.05867911288612854}], 
       ImageScaled[{0.5, 0}]]}, {
      StyleBox[{Antialiasing -> False, {
         Directive[
          Thickness[Tiny]], {
          LineBox[{{0.48597994530537825`, 0.}, {3.5151846855059254`, 0.}}]}, 
         StyleBox[{}, "GraphicsLabel", StripOnInput -> False]}, 
        StyleBox[{{
           Directive[
            Thickness[Tiny]], 
           LineBox[{{0.544211485870556, 0.}, 
             
             Offset[{-1.102182119232618*^-15, -6.}, {0.544211485870556, 
              0.}]}], 
           LineBox[{{3.455788514129444, 0.}, 
             
             Offset[{-1.102182119232618*^-15, -6.}, {3.455788514129444, 
              0.}]}], {{}, {}, {}, {}, {}}}, 
          StyleBox[{}, "GraphicsLabel", StripOnInput -> False]}, 
         "GraphicsTicks", StripOnInput -> False]}, "GraphicsAxes", 
       StripOnInput -> False]}}, {
    AspectRatio -> NCache[GoldenRatio^(-1), 0.6180339887498948], 
     Axes -> {False, True}, AxesLabel -> {None, None}, 
     AxesOrigin -> {0.48597994530537825`, 0.}, 
     CoordinatesToolOptions -> {"DisplayFunction" -> ({
         Identity[
          Part[#, 1]], 
         Identity[
          Part[#, 2]]}& ), "CopiedValueFunction" -> ({
         Identity[
          Part[#, 1]], 
         Identity[
          Part[#, 2]]}& )}, FrameLabel -> {{None, None}, {None, None}}, 
     FrameTicks -> {{Automatic, Automatic}, {{{1., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {2., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {3., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}}, {{1., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {2., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {3., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}}}}, 
     GridLines -> {None, None}, GridLinesStyle -> Directive[
       GrayLevel[0.5, 0.4]], PlotLabel -> 
     FormBox["\"Visibility-weighted saliency of saturation\"", 
       TraditionalForm], PlotRange -> {{All, All}, {All, All}}, 
     PlotRangePadding -> {{
        Scaled[0.02], 
        Scaled[0.02]}, {
        Scaled[0.02], 
        Scaled[0.05]}}, Ticks -> {None, Automatic}}],FormBox[
    FormBox[
     TemplateBox[{
      "\"Feature 1\"", "\"Feature 2\"", "\"Feature 3\"", "\"Feature 4\""}, 
      "SwatchLegend", DisplayFunction -> (FormBox[
        StyleBox[
         StyleBox[
          PaneBox[
           TagBox[
            GridBox[{{
               TagBox[
                GridBox[{{
                   GraphicsBox[{
                    Directive[
                    PointSize[0.5], 
                    AbsoluteThickness[1.6], 
                    EdgeForm[
                    Directive[
                    GrayLevel[0], 
                    Thickness[Small], 
                    Opacity[0.6789999999999999]]], 
                    RGBColor[0.3333333333333333, 0.7777777777777778, 1.]], 
                    RectangleBox[{0, 0}, {10, 10}, "RoundingRadius" -> 0]}, 
                    AspectRatio -> Full, ImageSize -> {10, 10}, 
                    PlotRangePadding -> None, ImagePadding -> Automatic, 
                    BaselinePosition -> (Scaled[0.1] -> Baseline)], #}, {
                   GraphicsBox[{
                    Directive[
                    PointSize[0.5], 
                    AbsoluteThickness[1.6], 
                    EdgeForm[
                    Directive[
                    GrayLevel[0], 
                    Thickness[Small], 
                    Opacity[0.6789999999999999]]], 
                    RGBColor[1., 0.3333333333333333, 0.3333333333333333]], 
                    RectangleBox[{0, 0}, {10, 10}, "RoundingRadius" -> 0]}, 
                    AspectRatio -> Full, ImageSize -> {10, 10}, 
                    PlotRangePadding -> None, ImagePadding -> Automatic, 
                    BaselinePosition -> (Scaled[0.1] -> Baseline)], #2}, {
                   GraphicsBox[{
                    Directive[
                    PointSize[0.5], 
                    AbsoluteThickness[1.6], 
                    EdgeForm[
                    Directive[
                    GrayLevel[0], 
                    Thickness[Small], 
                    Opacity[0.6789999999999999]]], 
                    RGBColor[1., 1., 0.3333333333333333]], 
                    RectangleBox[{0, 0}, {10, 10}, "RoundingRadius" -> 0]}, 
                    AspectRatio -> Full, ImageSize -> {10, 10}, 
                    PlotRangePadding -> None, ImagePadding -> Automatic, 
                    BaselinePosition -> (Scaled[0.1] -> Baseline)], #3}}, 
                 GridBoxAlignment -> {
                  "Columns" -> {Center, Left}, "Rows" -> {{Baseline}}}, 
                 AutoDelete -> False, 
                 GridBoxDividers -> {
                  "Columns" -> {{False}}, "Rows" -> {{False}}}, 
                 GridBoxItemSize -> {"Columns" -> {{All}}, "Rows" -> {{All}}},
                  GridBoxSpacings -> {
                  "Columns" -> {{0.5}}, "Rows" -> {{0.5}}}], "Grid"]}}, 
             GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
             AutoDelete -> False, 
             GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {"Columns" -> {{1}}, "Rows" -> {{0}}}], 
            "Grid"], Alignment -> Left, AppearanceElements -> None, 
           ImageMargins -> {{5, 5}, {5, 5}}, ImageSizeAction -> 
           "ResizeToFit"], LineIndent -> 0, StripOnInput -> False], {
          Directive[], 
          Directive[], FontFamily -> "Arial"}, Background -> Automatic, 
         StripOnInput -> False], TraditionalForm]& ), 
      InterpretationFunction :> (RowBox[{"SwatchLegend", "[", 
         RowBox[{
           RowBox[{"{", 
             RowBox[{
               RowBox[{"Directive", "[", 
                 RowBox[{
                   RowBox[{"EdgeForm", "[", 
                    RowBox[{"Directive", "[", 
                    RowBox[{
                    RowBox[{"Thickness", "[", "Small", "]"}], ",", 
                    RowBox[{"Opacity", "[", "0.6789999999999999`", "]"}]}], 
                    "]"}], "]"}], ",", 
                   InterpretationBox[
                    ButtonBox[
                    TooltipBox[
                    GraphicsBox[{{
                    GrayLevel[0], 
                    RectangleBox[{0, 0}]}, {
                    GrayLevel[0], 
                    RectangleBox[{1, -1}]}, {
                    RGBColor[0.3333333333333333, 0.7777777777777778, 1.], 
                    RectangleBox[{0, -1}, {2, 1}]}}, AspectRatio -> 1, Frame -> 
                    True, FrameStyle -> 
                    RGBColor[
                    0.2222222222222222, 0.5185185185185186, 
                    0.6666666666666667], FrameTicks -> None, PlotRangePadding -> 
                    None, ImageSize -> 
                    Dynamic[{
                    Automatic, 1.35 CurrentValue["FontCapHeight"]/
                    AbsoluteCurrentValue[Magnification]}]], 
                    "RGBColor[0.3333333333333333, 0.7777777777777778, 1.]"], 
                    Appearance -> None, BaseStyle -> {}, BaselinePosition -> 
                    Baseline, DefaultBaseStyle -> {}, ButtonFunction :> 
                    With[{Typeset`box$ = EvaluationBox[]}, 
                    If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    RGBColor[0.3333333333333333, 0.7777777777777778, 1.]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["RGBColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]], BaseStyle -> Inherited, Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    RGBColor[0.3333333333333333, 0.7777777777777778, 1.], 
                    Editable -> False, Selectable -> False]}], "]"}], ",", 
               RowBox[{"Directive", "[", 
                 RowBox[{
                   RowBox[{"EdgeForm", "[", 
                    RowBox[{"Directive", "[", 
                    RowBox[{
                    RowBox[{"Thickness", "[", "Small", "]"}], ",", 
                    RowBox[{"Opacity", "[", "0.6789999999999999`", "]"}]}], 
                    "]"}], "]"}], ",", 
                   InterpretationBox[
                    ButtonBox[
                    TooltipBox[
                    GraphicsBox[{{
                    GrayLevel[0], 
                    RectangleBox[{0, 0}]}, {
                    GrayLevel[0], 
                    RectangleBox[{1, -1}]}, {
                    RGBColor[1., 0.3333333333333333, 0.3333333333333333], 
                    RectangleBox[{0, -1}, {2, 1}]}}, AspectRatio -> 1, Frame -> 
                    True, FrameStyle -> 
                    RGBColor[
                    0.6666666666666667, 0.2222222222222222, 
                    0.2222222222222222], FrameTicks -> None, PlotRangePadding -> 
                    None, ImageSize -> 
                    Dynamic[{
                    Automatic, 1.35 CurrentValue["FontCapHeight"]/
                    AbsoluteCurrentValue[Magnification]}]], 
                    "RGBColor[1., 0.3333333333333333, 0.3333333333333333]"], 
                    Appearance -> None, BaseStyle -> {}, BaselinePosition -> 
                    Baseline, DefaultBaseStyle -> {}, ButtonFunction :> 
                    With[{Typeset`box$ = EvaluationBox[]}, 
                    If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    RGBColor[1., 0.3333333333333333, 0.3333333333333333]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["RGBColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]], BaseStyle -> Inherited, Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    RGBColor[1., 0.3333333333333333, 0.3333333333333333], 
                    Editable -> False, Selectable -> False]}], "]"}], ",", 
               RowBox[{"Directive", "[", 
                 RowBox[{
                   RowBox[{"EdgeForm", "[", 
                    RowBox[{"Directive", "[", 
                    RowBox[{
                    RowBox[{"Thickness", "[", "Small", "]"}], ",", 
                    RowBox[{"Opacity", "[", "0.6789999999999999`", "]"}]}], 
                    "]"}], "]"}], ",", 
                   InterpretationBox[
                    ButtonBox[
                    TooltipBox[
                    GraphicsBox[{{
                    GrayLevel[0], 
                    RectangleBox[{0, 0}]}, {
                    GrayLevel[0], 
                    RectangleBox[{1, -1}]}, {
                    RGBColor[1., 1., 0.3333333333333333], 
                    RectangleBox[{0, -1}, {2, 1}]}}, AspectRatio -> 1, Frame -> 
                    True, FrameStyle -> 
                    RGBColor[
                    0.6666666666666667, 0.6666666666666667, 
                    0.2222222222222222], FrameTicks -> None, PlotRangePadding -> 
                    None, ImageSize -> 
                    Dynamic[{
                    Automatic, 1.35 CurrentValue["FontCapHeight"]/
                    AbsoluteCurrentValue[Magnification]}]], 
                    "RGBColor[1., 1., 0.3333333333333333]"], Appearance -> 
                    None, BaseStyle -> {}, BaselinePosition -> Baseline, 
                    DefaultBaseStyle -> {}, ButtonFunction :> 
                    With[{Typeset`box$ = EvaluationBox[]}, 
                    If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    RGBColor[1., 1., 0.3333333333333333]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["RGBColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]], BaseStyle -> Inherited, Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    RGBColor[1., 1., 0.3333333333333333], Editable -> False, 
                    Selectable -> False]}], "]"}]}], "}"}], ",", 
           RowBox[{"{", 
             RowBox[{#, ",", #2, ",", #3, ",", #4}], "}"}], ",", 
           RowBox[{"LegendMarkers", "\[Rule]", 
             RowBox[{"{", 
               RowBox[{"{", 
                 RowBox[{"Automatic", ",", "Automatic", ",", "Automatic"}], 
                 "}"}], "}"}]}], ",", 
           RowBox[{"LabelStyle", "\[Rule]", 
             RowBox[{"{", 
               RowBox[{
                 RowBox[{"Directive", "[", "]"}], ",", 
                 RowBox[{"Directive", "[", "]"}]}], "}"}]}], ",", 
           RowBox[{"LegendLayout", "\[Rule]", "\"Column\""}]}], "]"}]& ), 
      Editable -> True], TraditionalForm], TraditionalForm]},
  "Legended",
  DisplayFunction->(GridBox[{{
      TagBox[
       ItemBox[
        PaneBox[
         TagBox[#, "SkipImageSizeLevel"], Alignment -> {Center, Baseline}, 
         BaselinePosition -> Baseline], DefaultBaseStyle -> "Labeled"], 
       "SkipImageSizeLevel"], 
      ItemBox[#2, DefaultBaseStyle -> "LabeledLabel"]}}, 
    GridBoxAlignment -> {"Columns" -> {{Center}}, "Rows" -> {{Center}}}, 
    AutoDelete -> False, GridBoxItemSize -> Automatic, 
    BaselinePosition -> {1, 1}]& ),
  Editable->True,
  InterpretationFunction->(RowBox[{"Legended", "[", 
     RowBox[{#, ",", 
       RowBox[{"Placed", "[", 
         RowBox[{#2, ",", "After"}], "]"}]}], "]"}]& )]], "Output",
 CellChangeTimes->{
  3.6500164027849245`*^9, 3.650016790358*^9, 3.650016860472441*^9, 
   3.6500170648135443`*^9, 3.6500178430964127`*^9, 3.6500183226052322`*^9, 
   3.650018401315884*^9, 3.650018565209202*^9, 3.6500186677396812`*^9, 
   3.6500189383934865`*^9, 3.650019539619196*^9, 3.650019983558324*^9, 
   3.650022738542828*^9, 3.6500257578638835`*^9, 3.6500396248037796`*^9, 
   3.6500398939700356`*^9, 3.650039993846919*^9, 3.650044483047104*^9, 
   3.6500452714722476`*^9, 3.6500499264109244`*^9, 3.650097074255372*^9, 
   3.6500973581328783`*^9, {3.650107354131773*^9, 3.65010735811481*^9}, 
   3.6501074363364735`*^9, 3.650107673680025*^9, 3.6501077926744156`*^9, 
   3.650107890363799*^9, 3.6501080811981897`*^9, 3.6501312378482943`*^9, 
   3.650131363033738*^9, 3.650131726555977*^9, 3.650138276227208*^9, 
   3.6501385284111557`*^9, 3.6501385625454597`*^9, 3.650140794485876*^9, 
   3.6502668310824347`*^9, 3.650276401576001*^9, 3.650371328121809*^9, 
   3.650371653895817*^9, 3.6503718611229467`*^9, 3.6503720385522165`*^9, 
   3.6503721627137003`*^9, 3.6512707685633197`*^9, 3.651273965610647*^9, 
   3.652009950004625*^9, 3.6520100365119658`*^9, 3.6523863309957137`*^9, 
   3.652386408425874*^9, 3.6523947270486937`*^9, 3.652444110292267*^9, 
   3.65246574776667*^9, 3.652466832950224*^9, 3.6524672418232903`*^9, 
   3.652467336058529*^9, 3.652467912529995*^9, 3.652468634130485*^9, 
   3.6524688744380474`*^9, 3.652469130516101*^9, {3.652469285790495*^9, 
   3.652469310025891*^9}, 3.6532353440720835`*^9, 3.6532368561304903`*^9, 
   3.653414274960363*^9, 3.6534144991058645`*^9, 3.6534242505981517`*^9, 
   3.653424320530247*^9, 3.6534244679743*^9, 3.653424632413035*^9, 
   3.6534252362133994`*^9, 3.653426256825693*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "0.38254627761629684`", ",", "0.40209108394436494`", ",", 
   "0.21536263843901585`"}], "}"}]], "Output",
 CellChangeTimes->{
  3.6500164027849245`*^9, 3.650016790358*^9, 3.650016860472441*^9, 
   3.6500170648135443`*^9, 3.6500178430964127`*^9, 3.6500183226052322`*^9, 
   3.650018401315884*^9, 3.650018565209202*^9, 3.6500186677396812`*^9, 
   3.6500189383934865`*^9, 3.650019539619196*^9, 3.650019983558324*^9, 
   3.650022738542828*^9, 3.6500257578638835`*^9, 3.6500396248037796`*^9, 
   3.6500398939700356`*^9, 3.650039993846919*^9, 3.650044483047104*^9, 
   3.6500452714722476`*^9, 3.6500499264109244`*^9, 3.650097074255372*^9, 
   3.6500973581328783`*^9, {3.650107354131773*^9, 3.65010735811481*^9}, 
   3.6501074363364735`*^9, 3.650107673680025*^9, 3.6501077926744156`*^9, 
   3.650107890363799*^9, 3.6501080811981897`*^9, 3.6501312378482943`*^9, 
   3.650131363033738*^9, 3.650131726555977*^9, 3.650138276227208*^9, 
   3.6501385284111557`*^9, 3.6501385625454597`*^9, 3.650140794485876*^9, 
   3.6502668310824347`*^9, 3.650276401576001*^9, 3.650371328121809*^9, 
   3.650371653895817*^9, 3.6503718611229467`*^9, 3.6503720385522165`*^9, 
   3.6503721627137003`*^9, 3.6512707685633197`*^9, 3.651273965610647*^9, 
   3.652009950004625*^9, 3.6520100365119658`*^9, 3.6523863309957137`*^9, 
   3.652386408425874*^9, 3.6523947270486937`*^9, 3.652444110292267*^9, 
   3.65246574776667*^9, 3.652466832950224*^9, 3.6524672418232903`*^9, 
   3.652467336058529*^9, 3.652467912529995*^9, 3.652468634130485*^9, 
   3.6524688744380474`*^9, 3.652469130516101*^9, {3.652469285790495*^9, 
   3.652469310025891*^9}, 3.6532353440720835`*^9, 3.6532368561304903`*^9, 
   3.653414274960363*^9, 3.6534144991058645`*^9, 3.6534242505981517`*^9, 
   3.653424320530247*^9, 3.6534244679743*^9, 3.653424632413035*^9, 
   3.6534252362133994`*^9, 3.653426256838202*^9}],

Cell[BoxData[
 TemplateBox[{GraphicsBox[{{
      Opacity[0], 
      PointBox[{0.48597994530537825`, 0.}]}, {{}, {
       Directive[
        EdgeForm[
         Directive[
          Thickness[Small], 
          Opacity[0.6789999999999999]]], 
        RGBColor[0.982864, 0.7431472, 0.3262672]], {{
         Directive[
          EdgeForm[
           Directive[
            Thickness[Small], 
            Opacity[0.6789999999999999]]], 
          RGBColor[0., 0.6666666666666666, 1.]], 
         TagBox[
          TooltipBox[
           TagBox[
            DynamicBox[{
              FEPrivate`If[
               CurrentValue["MouseOver"], 
               EdgeForm[{
                 GrayLevel[0.5], 
                 AbsoluteThickness[1.5], 
                 Opacity[0.66]}], {}, {}], 
              
              RectangleBox[{0.544211485870556, 0.}, {1.455788514129444, 
               0.38254627761629684`}, "RoundingRadius" -> 0]}], 
            StatusArea[#, 0.38254627761629684`]& , TagBoxNote -> 
            "0.38254627761629684"], 
           StyleBox["0.38254627761629684`", {}, StripOnInput -> False]], 
          Annotation[#, 
           Style[0.38254627761629684`, {}], "Tooltip"]& ]}, {
         Directive[
          EdgeForm[
           Directive[
            Thickness[Small], 
            Opacity[0.6789999999999999]]], 
          RGBColor[1., 0., 0.]], 
         TagBox[
          TooltipBox[
           TagBox[
            DynamicBox[{
              FEPrivate`If[
               CurrentValue["MouseOver"], 
               EdgeForm[{
                 GrayLevel[0.5], 
                 AbsoluteThickness[1.5], 
                 Opacity[0.66]}], {}, {}], 
              
              RectangleBox[{1.544211485870556, 0.}, {2.455788514129444, 
               0.40209108394436494`}, "RoundingRadius" -> 0]}], 
            StatusArea[#, 0.40209108394436494`]& , TagBoxNote -> 
            "0.40209108394436494"], 
           StyleBox["0.40209108394436494`", {}, StripOnInput -> False]], 
          Annotation[#, 
           Style[0.40209108394436494`, {}], "Tooltip"]& ]}, {
         Directive[
          EdgeForm[
           Directive[
            Thickness[Small], 
            Opacity[0.6789999999999999]]], 
          RGBColor[1., 1., 0.]], 
         TagBox[
          TooltipBox[
           TagBox[
            DynamicBox[{
              FEPrivate`If[
               CurrentValue["MouseOver"], 
               EdgeForm[{
                 GrayLevel[0.5], 
                 AbsoluteThickness[1.5], 
                 Opacity[0.66]}], {}, {}], 
              
              RectangleBox[{2.544211485870556, 0.}, {3.455788514129444, 
               0.21536263843901585`}, "RoundingRadius" -> 0]}], 
            StatusArea[#, 0.21536263843901585`]& , TagBoxNote -> 
            "0.21536263843901585"], 
           StyleBox["0.21536263843901585`", {}, StripOnInput -> False]], 
          Annotation[#, 
           Style[0.21536263843901585`, {}], "Tooltip"]& ]}}}, {}, {}}, {}, {
      InsetBox[
       FormBox[
        StyleBox["\"0.382546\"", {
          Directive[], 
          Directive[]}, StripOnInput -> False], TraditionalForm], 
       Offset[{0, 4}, {1., 0.38254627761629684`}], 
       ImageScaled[{0.5, 0}]], 
      InsetBox[
       FormBox[
        StyleBox["\"0.402091\"", {
          Directive[], 
          Directive[]}, StripOnInput -> False], TraditionalForm], 
       Offset[{0, 4}, {2., 0.40209108394436494`}], 
       ImageScaled[{0.5, 0}]], 
      InsetBox[
       FormBox[
        StyleBox["\"0.215363\"", {
          Directive[], 
          Directive[]}, StripOnInput -> False], TraditionalForm], 
       Offset[{0, 4}, {3., 0.21536263843901585`}], 
       ImageScaled[{0.5, 0}]]}, {
      StyleBox[{Antialiasing -> False, {
         Directive[
          Thickness[Tiny]], {
          LineBox[{{0.48597994530537825`, 0.}, {3.5151846855059254`, 0.}}]}, 
         StyleBox[{}, "GraphicsLabel", StripOnInput -> False]}, 
        StyleBox[{{
           Directive[
            Thickness[Tiny]], 
           LineBox[{{0.544211485870556, 0.}, 
             
             Offset[{-1.102182119232618*^-15, -6.}, {0.544211485870556, 
              0.}]}], 
           LineBox[{{3.455788514129444, 0.}, 
             
             Offset[{-1.102182119232618*^-15, -6.}, {3.455788514129444, 
              0.}]}], {{}, {}, {}, {}, {}}}, 
          StyleBox[{}, "GraphicsLabel", StripOnInput -> False]}, 
         "GraphicsTicks", StripOnInput -> False]}, "GraphicsAxes", 
       StripOnInput -> False]}}, {
    AspectRatio -> NCache[GoldenRatio^(-1), 0.6180339887498948], 
     Axes -> {False, True}, AxesLabel -> {None, None}, 
     AxesOrigin -> {0.48597994530537825`, 0.}, 
     CoordinatesToolOptions -> {"DisplayFunction" -> ({
         Identity[
          Part[#, 1]], 
         Identity[
          Part[#, 2]]}& ), "CopiedValueFunction" -> ({
         Identity[
          Part[#, 1]], 
         Identity[
          Part[#, 2]]}& )}, FrameLabel -> {{None, None}, {None, None}}, 
     FrameTicks -> {{Automatic, Automatic}, {{{1., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {2., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {3., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}}, {{1., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {2., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}, {3., 
          FormBox[
           InterpretationBox[
            StyleBox[
             
             GraphicsBox[{}, ImageSize -> {0, 0}, BaselinePosition -> 
              Baseline], "CacheGraphics" -> False], 
            Spacer[0]], TraditionalForm], {0.004, 0}}}}}, 
     GridLines -> {None, None}, GridLinesStyle -> Directive[
       GrayLevel[0.5, 0.4]], PlotLabel -> 
     FormBox["\"Visibility-weighted saliency\"", TraditionalForm], 
     PlotRange -> {{All, All}, {All, All}}, PlotRangePadding -> {{
        Scaled[0.02], 
        Scaled[0.02]}, {
        Scaled[0.02], 
        Scaled[0.05]}}, Ticks -> {None, Automatic}}],FormBox[
    FormBox[
     TemplateBox[{
      "\"Feature 1\"", "\"Feature 2\"", "\"Feature 3\"", "\"Feature 4\""}, 
      "SwatchLegend", DisplayFunction -> (FormBox[
        StyleBox[
         StyleBox[
          PaneBox[
           TagBox[
            GridBox[{{
               TagBox[
                GridBox[{{
                   GraphicsBox[{
                    Directive[
                    PointSize[0.5], 
                    AbsoluteThickness[1.6], 
                    EdgeForm[
                    Directive[
                    GrayLevel[0], 
                    Thickness[Small], 
                    Opacity[0.6789999999999999]]], 
                    RGBColor[0., 0.6666666666666666, 1.]], 
                    RectangleBox[{0, 0}, {10, 10}, "RoundingRadius" -> 0]}, 
                    AspectRatio -> Full, ImageSize -> {10, 10}, 
                    PlotRangePadding -> None, ImagePadding -> Automatic, 
                    BaselinePosition -> (Scaled[0.1] -> Baseline)], #}, {
                   GraphicsBox[{
                    Directive[
                    PointSize[0.5], 
                    AbsoluteThickness[1.6], 
                    EdgeForm[
                    Directive[
                    GrayLevel[0], 
                    Thickness[Small], 
                    Opacity[0.6789999999999999]]], 
                    RGBColor[1., 0., 0.]], 
                    RectangleBox[{0, 0}, {10, 10}, "RoundingRadius" -> 0]}, 
                    AspectRatio -> Full, ImageSize -> {10, 10}, 
                    PlotRangePadding -> None, ImagePadding -> Automatic, 
                    BaselinePosition -> (Scaled[0.1] -> Baseline)], #2}, {
                   GraphicsBox[{
                    Directive[
                    PointSize[0.5], 
                    AbsoluteThickness[1.6], 
                    EdgeForm[
                    Directive[
                    GrayLevel[0], 
                    Thickness[Small], 
                    Opacity[0.6789999999999999]]], 
                    RGBColor[1., 1., 0.]], 
                    RectangleBox[{0, 0}, {10, 10}, "RoundingRadius" -> 0]}, 
                    AspectRatio -> Full, ImageSize -> {10, 10}, 
                    PlotRangePadding -> None, ImagePadding -> Automatic, 
                    BaselinePosition -> (Scaled[0.1] -> Baseline)], #3}}, 
                 GridBoxAlignment -> {
                  "Columns" -> {Center, Left}, "Rows" -> {{Baseline}}}, 
                 AutoDelete -> False, 
                 GridBoxDividers -> {
                  "Columns" -> {{False}}, "Rows" -> {{False}}}, 
                 GridBoxItemSize -> {"Columns" -> {{All}}, "Rows" -> {{All}}},
                  GridBoxSpacings -> {
                  "Columns" -> {{0.5}}, "Rows" -> {{0.5}}}], "Grid"]}}, 
             GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
             AutoDelete -> False, 
             GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {"Columns" -> {{1}}, "Rows" -> {{0}}}], 
            "Grid"], Alignment -> Left, AppearanceElements -> None, 
           ImageMargins -> {{5, 5}, {5, 5}}, ImageSizeAction -> 
           "ResizeToFit"], LineIndent -> 0, StripOnInput -> False], {
          Directive[], 
          Directive[], FontFamily -> "Arial"}, Background -> Automatic, 
         StripOnInput -> False], TraditionalForm]& ), 
      InterpretationFunction :> (RowBox[{"SwatchLegend", "[", 
         RowBox[{
           RowBox[{"{", 
             RowBox[{
               RowBox[{"Directive", "[", 
                 RowBox[{
                   RowBox[{"EdgeForm", "[", 
                    RowBox[{"Directive", "[", 
                    RowBox[{
                    RowBox[{"Thickness", "[", "Small", "]"}], ",", 
                    RowBox[{"Opacity", "[", "0.6789999999999999`", "]"}]}], 
                    "]"}], "]"}], ",", 
                   InterpretationBox[
                    ButtonBox[
                    TooltipBox[
                    GraphicsBox[{{
                    GrayLevel[0], 
                    RectangleBox[{0, 0}]}, {
                    GrayLevel[0], 
                    RectangleBox[{1, -1}]}, {
                    RGBColor[0., 0.6666666666666666, 1.], 
                    RectangleBox[{0, -1}, {2, 1}]}}, AspectRatio -> 1, Frame -> 
                    True, FrameStyle -> 
                    RGBColor[0., 0.4444444444444444, 0.6666666666666667], 
                    FrameTicks -> None, PlotRangePadding -> None, ImageSize -> 
                    Dynamic[{
                    Automatic, 1.35 CurrentValue["FontCapHeight"]/
                    AbsoluteCurrentValue[Magnification]}]], 
                    "RGBColor[0., 0.6666666666666666, 1.]"], Appearance -> 
                    None, BaseStyle -> {}, BaselinePosition -> Baseline, 
                    DefaultBaseStyle -> {}, ButtonFunction :> 
                    With[{Typeset`box$ = EvaluationBox[]}, 
                    If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    RGBColor[0., 0.6666666666666666, 1.]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["RGBColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]], BaseStyle -> Inherited, Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    RGBColor[0., 0.6666666666666666, 1.], Editable -> False, 
                    Selectable -> False]}], "]"}], ",", 
               RowBox[{"Directive", "[", 
                 RowBox[{
                   RowBox[{"EdgeForm", "[", 
                    RowBox[{"Directive", "[", 
                    RowBox[{
                    RowBox[{"Thickness", "[", "Small", "]"}], ",", 
                    RowBox[{"Opacity", "[", "0.6789999999999999`", "]"}]}], 
                    "]"}], "]"}], ",", 
                   InterpretationBox[
                    ButtonBox[
                    TooltipBox[
                    GraphicsBox[{{
                    GrayLevel[0], 
                    RectangleBox[{0, 0}]}, {
                    GrayLevel[0], 
                    RectangleBox[{1, -1}]}, {
                    RGBColor[1., 0., 0.], 
                    RectangleBox[{0, -1}, {2, 1}]}}, AspectRatio -> 1, Frame -> 
                    True, FrameStyle -> RGBColor[0.6666666666666667, 0., 0.], 
                    FrameTicks -> None, PlotRangePadding -> None, ImageSize -> 
                    Dynamic[{
                    Automatic, 1.35 CurrentValue["FontCapHeight"]/
                    AbsoluteCurrentValue[Magnification]}]], 
                    "RGBColor[1., 0., 0.]"], Appearance -> None, 
                    BaseStyle -> {}, BaselinePosition -> Baseline, 
                    DefaultBaseStyle -> {}, ButtonFunction :> 
                    With[{Typeset`box$ = EvaluationBox[]}, 
                    If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    RGBColor[1., 0., 0.]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["RGBColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]], BaseStyle -> Inherited, Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    RGBColor[1., 0., 0.], Editable -> False, Selectable -> 
                    False]}], "]"}], ",", 
               RowBox[{"Directive", "[", 
                 RowBox[{
                   RowBox[{"EdgeForm", "[", 
                    RowBox[{"Directive", "[", 
                    RowBox[{
                    RowBox[{"Thickness", "[", "Small", "]"}], ",", 
                    RowBox[{"Opacity", "[", "0.6789999999999999`", "]"}]}], 
                    "]"}], "]"}], ",", 
                   InterpretationBox[
                    ButtonBox[
                    TooltipBox[
                    GraphicsBox[{{
                    GrayLevel[0], 
                    RectangleBox[{0, 0}]}, {
                    GrayLevel[0], 
                    RectangleBox[{1, -1}]}, {
                    RGBColor[1., 1., 0.], 
                    RectangleBox[{0, -1}, {2, 1}]}}, AspectRatio -> 1, Frame -> 
                    True, FrameStyle -> 
                    RGBColor[0.6666666666666667, 0.6666666666666667, 0.], 
                    FrameTicks -> None, PlotRangePadding -> None, ImageSize -> 
                    Dynamic[{
                    Automatic, 1.35 CurrentValue["FontCapHeight"]/
                    AbsoluteCurrentValue[Magnification]}]], 
                    "RGBColor[1., 1., 0.]"], Appearance -> None, 
                    BaseStyle -> {}, BaselinePosition -> Baseline, 
                    DefaultBaseStyle -> {}, ButtonFunction :> 
                    With[{Typeset`box$ = EvaluationBox[]}, 
                    If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    RGBColor[1., 1., 0.]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["RGBColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]], BaseStyle -> Inherited, Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    RGBColor[1., 1., 0.], Editable -> False, Selectable -> 
                    False]}], "]"}]}], "}"}], ",", 
           RowBox[{"{", 
             RowBox[{#, ",", #2, ",", #3, ",", #4}], "}"}], ",", 
           RowBox[{"LegendMarkers", "\[Rule]", 
             RowBox[{"{", 
               RowBox[{"{", 
                 RowBox[{"Automatic", ",", "Automatic", ",", "Automatic"}], 
                 "}"}], "}"}]}], ",", 
           RowBox[{"LabelStyle", "\[Rule]", 
             RowBox[{"{", 
               RowBox[{
                 RowBox[{"Directive", "[", "]"}], ",", 
                 RowBox[{"Directive", "[", "]"}]}], "}"}]}], ",", 
           RowBox[{"LegendLayout", "\[Rule]", "\"Column\""}]}], "]"}]& ), 
      Editable -> True], TraditionalForm], TraditionalForm]},
  "Legended",
  DisplayFunction->(GridBox[{{
      TagBox[
       ItemBox[
        PaneBox[
         TagBox[#, "SkipImageSizeLevel"], Alignment -> {Center, Baseline}, 
         BaselinePosition -> Baseline], DefaultBaseStyle -> "Labeled"], 
       "SkipImageSizeLevel"], 
      ItemBox[#2, DefaultBaseStyle -> "LabeledLabel"]}}, 
    GridBoxAlignment -> {"Columns" -> {{Center}}, "Rows" -> {{Center}}}, 
    AutoDelete -> False, GridBoxItemSize -> Automatic, 
    BaselinePosition -> {1, 1}]& ),
  Editable->True,
  InterpretationFunction->(RowBox[{"Legended", "[", 
     RowBox[{#, ",", 
       RowBox[{"Placed", "[", 
         RowBox[{#2, ",", "After"}], "]"}]}], "]"}]& )]], "Output",
 CellChangeTimes->{
  3.6500164027849245`*^9, 3.650016790358*^9, 3.650016860472441*^9, 
   3.6500170648135443`*^9, 3.6500178430964127`*^9, 3.6500183226052322`*^9, 
   3.650018401315884*^9, 3.650018565209202*^9, 3.6500186677396812`*^9, 
   3.6500189383934865`*^9, 3.650019539619196*^9, 3.650019983558324*^9, 
   3.650022738542828*^9, 3.6500257578638835`*^9, 3.6500396248037796`*^9, 
   3.6500398939700356`*^9, 3.650039993846919*^9, 3.650044483047104*^9, 
   3.6500452714722476`*^9, 3.6500499264109244`*^9, 3.650097074255372*^9, 
   3.6500973581328783`*^9, {3.650107354131773*^9, 3.65010735811481*^9}, 
   3.6501074363364735`*^9, 3.650107673680025*^9, 3.6501077926744156`*^9, 
   3.650107890363799*^9, 3.6501080811981897`*^9, 3.6501312378482943`*^9, 
   3.650131363033738*^9, 3.650131726555977*^9, 3.650138276227208*^9, 
   3.6501385284111557`*^9, 3.6501385625454597`*^9, 3.650140794485876*^9, 
   3.6502668310824347`*^9, 3.650276401576001*^9, 3.650371328121809*^9, 
   3.650371653895817*^9, 3.6503718611229467`*^9, 3.6503720385522165`*^9, 
   3.6503721627137003`*^9, 3.6512707685633197`*^9, 3.651273965610647*^9, 
   3.652009950004625*^9, 3.6520100365119658`*^9, 3.6523863309957137`*^9, 
   3.652386408425874*^9, 3.6523947270486937`*^9, 3.652444110292267*^9, 
   3.65246574776667*^9, 3.652466832950224*^9, 3.6524672418232903`*^9, 
   3.652467336058529*^9, 3.652467912529995*^9, 3.652468634130485*^9, 
   3.6524688744380474`*^9, 3.652469130516101*^9, {3.652469285790495*^9, 
   3.652469310025891*^9}, 3.6532353440720835`*^9, 3.6532368561304903`*^9, 
   3.653414274960363*^9, 3.6534144991058645`*^9, 3.6534242505981517`*^9, 
   3.653424320530247*^9, 3.6534244679743*^9, 3.653424632413035*^9, 
   3.6534252362133994`*^9, 3.653426256897748*^9}]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\<Tooth_RGBA.raw\>\""}], ",", 
      RowBox[{"Flatten", "@", 
       RowBox[{"ImageData", "[", 
        RowBox[{"r", ",", "\"\<Byte\>\""}], "]"}]}], ",", 
      RowBox[{"{", 
       RowBox[{"\"\<Binary\>\"", ",", "\"\<Byte\>\""}], "}"}]}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"Export", "[", 
       RowBox[{
        RowBox[{"path", "<>", "\"\<Tooth_\>\"", "<>", 
         RowBox[{"StringTake", "[", 
          RowBox[{"\"\<RGBA\>\"", ",", 
           RowBox[{"{", "#", "}"}]}], "]"}], "<>", "\"\<.raw\>\""}], ",", 
        RowBox[{"Flatten", "@", 
         RowBox[{"ImageData", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"ColorSeparate", "[", 
             RowBox[{"r", ",", "\"\<RGBA\>\""}], "]"}], "[", 
            RowBox[{"[", "#", "]"}], "]"}], ",", "\"\<Byte\>\""}], "]"}]}], 
        ",", 
        RowBox[{"{", 
         RowBox[{"\"\<Binary\>\"", ",", "\"\<Byte\>\""}], "}"}]}], "]"}], 
      "&"}], "/@", 
     RowBox[{"Range", "[", "4", "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{
    "s", "=", 
     "\"\<NDims = 3\nDimSize = 140 120 161\nElementType = MET_UCHAR\n\
ElementSpacing = 1.0 1.0 1.0\nElementByteOrderMSB = False\nElementDataFile = \
Tooth_.raw\\n\>\""}], ";", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"Export", "[", 
       RowBox[{
        RowBox[{"path", "<>", "\"\<Tooth_\>\"", "<>", 
         RowBox[{"StringTake", "[", 
          RowBox[{"\"\<RGBA\>\"", ",", 
           RowBox[{"{", "#", "}"}]}], "]"}], "<>", "\"\<.mhd\>\""}], ",", 
        RowBox[{"StringReplace", "[", 
         RowBox[{"s", ",", 
          RowBox[{"\"\<Tooth_\>\"", "\[Rule]", 
           RowBox[{"\"\<Tooth_\>\"", "<>", 
            RowBox[{"StringTake", "[", 
             RowBox[{"\"\<RGBA\>\"", ",", 
              RowBox[{"{", "#", "}"}]}], "]"}]}]}]}], "]"}], ",", 
        "\"\<Text\>\""}], "]"}], "&"}], "/@", 
     RowBox[{"Range", "[", "4", "]"}]}], ";"}], "*)"}], "\[IndentingNewLine]",
   "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"Export", "[", 
     RowBox[{"visibilityfilename", ",", 
      RowBox[{"Flatten", "@", 
       RowBox[{"ImageData", "[", 
        RowBox[{"vis", ",", "\"\<Byte\>\""}], "]"}]}], ",", 
      RowBox[{"{", 
       RowBox[{"\"\<Binary\>\"", ",", "\"\<Byte\>\""}], "}"}]}], "]"}], ";"}],
    "*)"}]}]], "Input",
 CellChangeTimes->{{3.6426973695514584`*^9, 3.642697416176983*^9}, 
   3.6426976454550977`*^9, {3.642697681890455*^9, 3.6426977029863577`*^9}, {
   3.6426977520687747`*^9, 3.6426977648777885`*^9}, {3.6427111404882603`*^9, 
   3.642711144319793*^9}, {3.6439742174454107`*^9, 3.643974256879997*^9}, {
   3.6500125107520247`*^9, 3.6500125198242645`*^9}, {3.652386276492815*^9, 
   3.6523862824247017`*^9}, {3.6534262741297426`*^9, 3.653426274386541*^9}}]
},
WindowSize->{1474, 821},
WindowMargins->{{-8, Automatic}, {Automatic, -8}},
FrontEndVersion->"10.2 for Microsoft Windows (64-bit) (July 29, 2015)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 3664, 72, 92, "Input"],
Cell[4247, 96, 5131, 89, 389, "Output"]
}, Open  ]],
Cell[9393, 188, 4438, 131, 252, "Input"],
Cell[13834, 321, 11376, 342, 572, "Input"],
Cell[25213, 665, 17087, 468, 952, "Input"],
Cell[42303, 1135, 16381, 457, 972, "Input"],
Cell[58687, 1594, 9723, 249, 552, "Input"],
Cell[68413, 1845, 1022, 21, 72, "Input"],
Cell[CellGroupData[{
Cell[69460, 1870, 11189, 302, 592, "Input"],
Cell[80652, 2174, 1887, 29, 31, "Output"],
Cell[82542, 2205, 21330, 455, 256, "Output"],
Cell[103875, 2662, 1886, 29, 31, "Output"],
Cell[105764, 2693, 21341, 454, 253, "Output"],
Cell[127108, 3149, 21540, 461, 256, "Output"],
Cell[148651, 3612, 21531, 461, 256, "Output"],
Cell[170185, 4075, 1887, 29, 31, "Output"],
Cell[172075, 4106, 20943, 453, 256, "Output"]
}, Open  ]],
Cell[193033, 4562, 2947, 71, 232, "Input"]
}
]
*)

(* End of internal cache information *)
